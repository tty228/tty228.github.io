<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ã€RouterOS(ROS)ã€‘Cloudflare DDNS è„šæœ¬</title>
    <url>/2025/05/10/MikroTik(ROS)%20Cloudflare%20DDNS%20%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul>
<li></li>
</ul>
<h2 id="æœ¬æ–‡åŸºäº-ROS-7-18-2-ç¼–å†™"><a href="#æœ¬æ–‡åŸºäº-ROS-7-18-2-ç¼–å†™" class="headerlink" title="æœ¬æ–‡åŸºäº ROS 7.18.2 ç¼–å†™"></a><strong>æœ¬æ–‡åŸºäº ROS 7.18.2 ç¼–å†™</strong></h2><h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>å› ä¸ºæœ€è¿‘å¿½æ‚ äº†ä¸ªåŒäº‹ç©NASï¼Œæš‚æ—¶ç”¨çš„æˆ‘çš„åŸŸåï¼Œç»™ä»–æ•´å®Œåä»£ä¹‹åï¼Œçœ‹ç€ cloudflare ä¸€å¤§ä¸²çš„åŸŸåè®°å½•ï¼Œçœ‹ç€å¾ˆè›‹ç–¼ï¼Œç´¢æ€§æŠŠæ²¡å¿…è¦æ›´æ–°çš„åœ°å€å…¨éƒ½æ¢æˆäº† CNAME è®°å½•ï¼Œçœ‹èµ·æ¥æ¸…çˆ½å¤šäº†<br>ç„¶åè¿˜æ˜¯æ„Ÿè§‰åŸæœ¬çš„è„šæœ¬ä¸å¤ªå¥½ç”¨ï¼Œå°±é‡æ–°å†™äº†ä¸€ä¸ªè„šæœ¬è‡ªç”¨<br>å’Œç½‘ä¸Šæµä¼ çš„è„šæœ¬ï¼Œä¸»è¦æœ‰ä»¥ä¸‹æ”¹è¿›ï¼š</p>
<ul>
<li>âœ… æ”¯æŒå¤šä¸ªåŸŸåå’Œè®°å½•ç±»å‹ï¼ˆA &#x2F; AAAAï¼‰åŒæ—¶æ›´æ–°</li>
<li>ğŸ” ä½¿ç”¨ Cloudflare API Tokenï¼Œè®¾ç½®æ›´ç®€å•</li>
<li>â• è‡ªåŠ¨æ–°å»ºåŸŸåè®°å½•ï¼Œæ— éœ€æ‰‹åŠ¨åˆ›å»º</li>
<li>ğŸ§  ä½¿ç”¨ç¼“å­˜æœºåˆ¶ï¼Œé¿å…é«˜é¢‘ API è¯·æ±‚ï¼Œæ”¯æŒå¼ºåˆ¶æ›´æ–°æ—¶é—´é—´éš”</li>
<li>ğŸ“¤ æ”¯æŒæäº¤æœ¬æœºæˆ–å†…ç½‘è®¾å¤‡çš„ IPv6 åœ°å€ï¼ˆå¦‚ ::1ã€æ‰‹åŠ¨åç¼€æ‹¼æ¥ã€MAC åœ°å€è·å–ï¼‰</li>
<li>ğŸ“¡ ä½¿ç”¨ Cloudflare DNS API è¯»å–åŸŸåè®°å½•ï¼Œè€Œé DNS è§£æ</li>
</ul>
<p>å…¶å®æœ¬æ¥åº”è¯¥åŠ ä¸Šå¯ä»¥åŒæ­¥å¤šä¸ªè®¾å¤‡ IPv6 åœ°å€çš„ï¼Œä¸è¿‡è€ƒè™‘åˆ°è®¾ç½®åä»£ä¹‹åå…¶å®æ ¹æœ¬ä¸éœ€è¦è¿™ä¸ªåŠŸèƒ½ï¼Œå°±æ‡’å¾—åšäº†</p>
<span id="more"></span>
<h4 id="é…ç½®è¯´æ˜"><a href="#é…ç½®è¯´æ˜" class="headerlink" title="é…ç½®è¯´æ˜"></a>é…ç½®è¯´æ˜</h4><p>è®¾ç½®æ–¹é¢æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦åœ¨è„šæœ¬é¡¶éƒ¨è®¾ç½®ä»¥ä¸‹å˜é‡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">:local CFiface &quot;pppoe-out1&quot;      # è·å–IPv4åœ°å€çš„æ¥å£</span><br><span class="line">:local CFiface6 &quot;pppoe-out1&quot;     # è·å–IPv6å‰ç¼€çš„æ¥å£</span><br><span class="line">:local CFzoneid &quot;ä½ çš„Zone ID&quot;    # åŒºåŸŸ ID</span><br><span class="line">:local CFtoken &quot;ä½ çš„APIä»¤ç‰Œ&quot;      # åˆ›å»ºä»¤ç‰Œ-&gt;ç¼–è¾‘åŒºåŸŸ DNS (è¯·å‹¿ä½¿ç”¨å…¨å±€ API)</span><br><span class="line"># è®¾ç½®è¦æ›´æ–°çš„è®°å½•ï¼ˆæ”¯æŒå¤šä¸ªï¼‰ï¼š</span><br><span class="line">:local DomainsToUpdate &#123;</span><br><span class="line">    &quot;v4.domain.com|A&quot;;</span><br><span class="line">    &quot;v6.domain.com|AAAA&quot;;</span><br><span class="line">    &quot;ds.domain.com|A&quot;;</span><br><span class="line">    &quot;ds.domain.com|AAAA&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/tty228/mikrotik-scripts/tree/main/cloudflare_ddns" title="é¡¹ç›®åœ°å€">é¡¹ç›®åœ°å€</a></p>
]]></content>
      <categories>
        <category>RouterOS</category>
      </categories>
      <tags>
        <tag>RouterOS</tag>
        <tag>ROS</tag>
        <tag>Cloudflare DDNS</tag>
        <tag>ROS Cloudflare DDNS</tag>
        <tag>ROS Script</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€RouterOS(ROS)ã€‘IPv4 &amp; IPv6 è‡ªåŠ¨åˆ†æµè®¾ç½®</title>
    <url>/2025/05/09/%E3%80%90RouterOS(ROS)%E3%80%91IPv4%20IPv6%20%E8%87%AA%E5%8A%A8%E5%88%86%E6%B5%81%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul>
<li></li>
</ul>
<h2 id="æœ¬æ–‡åŸºäº-ROS-7-18-2-ç¼–å†™"><a href="#æœ¬æ–‡åŸºäº-ROS-7-18-2-ç¼–å†™" class="headerlink" title="æœ¬æ–‡åŸºäº ROS 7.18.2 ç¼–å†™"></a><strong>æœ¬æ–‡åŸºäº ROS 7.18.2 ç¼–å†™</strong></h2><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p> IPv6 æ—¥æ¸æ™®åŠï¼Œæœ€è¿‘é—²æ¥æ— äº‹ï¼Œæƒ³ç€æŠŠ RouterOS ä¸Šçš„åˆ†æµè§„åˆ™æ”¹ä¸º IPv4 &amp; IPv6ï¼Œå› ä¸º IPv6 çš„åˆ†æµè®¾ç½®å’Œ IPv4 æœ‰è¯¸å¤šä¸åŒï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹</p>
<h3 id="è‡ªåŠ¨æ›´æ–°åˆ†æµè§„åˆ™çš„è„šæœ¬"><a href="#è‡ªåŠ¨æ›´æ–°åˆ†æµè§„åˆ™çš„è„šæœ¬" class="headerlink" title="è‡ªåŠ¨æ›´æ–°åˆ†æµè§„åˆ™çš„è„šæœ¬"></a>è‡ªåŠ¨æ›´æ–°åˆ†æµè§„åˆ™çš„è„šæœ¬</h3><p>å·¦ä¾§ System â†’ Scriptsï¼Œæ–°å»ºä¸€ä¸ªç”¨äºè‡ªåŠ¨æ›´æ–°åˆ†æµè§„åˆ™çš„è„šæœ¬<br><a href="https://tty228.github.io/2022/06/09/%E3%80%90RouterOS(ROS)%E3%80%91%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E5%88%86%E6%B5%81%E8%A7%84%E5%88%99/" title="ã€RouterOS(ROS)ã€‘è‡ªåŠ¨æ›´æ–°åˆ†æµè§„åˆ™ by 2022">ã€RouterOS(ROS)ã€‘è‡ªåŠ¨æ›´æ–°åˆ†æµè§„åˆ™ by 2022</a>  ä¹‹å‰çš„æ–‡ç« æœ‰ä¸€ä¸ªé€‚ç”¨äº IPv4 çš„æ›´æ–°è„šæœ¬ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œéœ€è¦åšä¸€ä¸‹ä¿®æ”¹ï¼Œä½¿å®ƒå¯ä»¥é€‚ç”¨äº IPv4 &amp; IPv6  </p>
<p>è¿™é‡Œä½¿ç”¨çš„æ˜¯å·²ç»åˆ¶ä½œå¥½çš„ IP åˆ—è¡¨æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ä¸‹è½½ IPv4 å¹¶é‡å‘½å</span><br><span class="line">/tool fetch url=http://www.iwik.org/ipcountry/mikrotik/CN dst-path=CN_ipv4</span><br><span class="line"></span><br><span class="line"># ä¸‹è½½ IPv6 å¹¶é‡å‘½å</span><br><span class="line">/tool fetch url=http://www.iwik.org/ipcountry/mikrotik_ipv6/CN dst-path=CN_ipv6</span><br><span class="line"></span><br><span class="line"># å…³é—­æ—¥å¿—è¾“å‡ºé¿å…åˆ·å±</span><br><span class="line">/system logging disable 0</span><br><span class="line"></span><br><span class="line">/import file-name=CN_ipv4</span><br><span class="line">:local CNv4 [:len [/ip firewall address-list find list=&quot;CN&quot;]]</span><br><span class="line">/file remove [find name=&quot;CN_ipv4&quot;]</span><br><span class="line"></span><br><span class="line">/import file-name=CN_ipv6</span><br><span class="line">:local CNv6 [:len [/ipv6 firewall address-list find list=&quot;CN&quot;]]</span><br><span class="line">/file remove [find name=&quot;CN_ipv6&quot;]</span><br><span class="line"></span><br><span class="line"># æ¢å¤æ—¥å¿—è¾“å‡º</span><br><span class="line">/system logging enable 0</span><br><span class="line">:log info (&quot;CNåˆ—è¡¨æ›´æ–°: IPv4 &quot; . $CNv4 . &quot;æ¡, IPv6 &quot; . $CNv6 . &quot;æ¡&quot;)</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<hr>
<p>æˆåŠŸçš„è¯åº”è¯¥èƒ½åœ¨é˜²ç«å¢™å’Œæ—¥å¿—ä¸­çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š<br><img src="/images/2025/1_1.png" alt="è„šæœ¬è¿è¡ŒçŠ¶æ€"></p>
<h3 id="è·¯ç”±è¡¨è®¾ç½®"><a href="#è·¯ç”±è¡¨è®¾ç½®" class="headerlink" title="è·¯ç”±è¡¨è®¾ç½®"></a>è·¯ç”±è¡¨è®¾ç½®</h3><p>å·¦ä¾§ Routing â†’ Tablesï¼Œæ–°å»ºä¸€ä¸ªè·¯ç”±è¡¨ï¼Œåå­—è‡ªå·±éšä¾¿å†™ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯ openwrtï¼Œè·¯ç”±è¡¨ç”¨äºé˜²ç«å¢™æ ‡è®°å’ŒæŒ‡å®šæµé‡å‡ºå£</p>
<ul>
<li>FIBï¼š å‹¾é€‰<br><img src="/images/2025/1_2.png" alt="è·¯ç”±è¡¨"></li>
</ul>
<h4 id="IPv4-è·¯ç”±è®¾ç½®ï¼š"><a href="#IPv4-è·¯ç”±è®¾ç½®ï¼š" class="headerlink" title="IPv4 è·¯ç”±è®¾ç½®ï¼š"></a>IPv4 è·¯ç”±è®¾ç½®ï¼š</h4><p>å·¦ä¾§èœå• IP â†’ Routesï¼Œæ–°å»ºä¸€æ¡è·¯ç”±è§„åˆ™ï¼š<br><img src="/images/2025/1_3.png" alt="IPv4 è·¯ç”±è¡¨"></p>
<ul>
<li>Dst.Addressï¼š0.0.0.0&#x2F;0</li>
<li>Gatewayï¼šæ—è·¯ç½‘å…³IPåœ°å€</li>
<li>Distanceï¼š2 # (å»ºè®®ä½¿ç”¨å¤§äº1çš„ä½ä¼˜å…ˆçº§)</li>
<li>Routing Tableï¼š é€‰ä¸­åˆšåˆšæ–°å»ºçš„è·¯ç”±è¡¨ï¼Œä¾‹å¦‚ openwrt<br>ç‚¹å‡»Apply â†’ OKï¼Œä¿å­˜æäº¤ã€‚<br>ä½¿ç”¨å‘½ä»¤å¯¼å…¥ï¼š<br><code>/ip route add dst-address=0.0.0.0/0 gateway=192.168.1.250 distance=2 routing-table=openwrt</code></li>
</ul>
<h4 id="IPv6-è·¯ç”±è®¾ç½®ï¼š"><a href="#IPv6-è·¯ç”±è®¾ç½®ï¼š" class="headerlink" title="IPv6 è·¯ç”±è®¾ç½®ï¼š"></a>IPv6 è·¯ç”±è®¾ç½®ï¼š</h4><p>å·¦ä¾§èœå• IPv6 â†’ Routesï¼Œæ–°å»ºä¸€æ¡è·¯ç”±è§„åˆ™ï¼š<br><img src="/images/2025/1_4.png" alt="IPv6 è·¯ç”±è¡¨"></p>
<ul>
<li>Dst.Addressï¼š::&#x2F;0</li>
<li>Gatewayï¼š æ—è·¯ç½‘å…³çš„æœ¬åœ°é“¾è·¯ IPv6 åœ°å€ ï¼Œä¾‹å¦‚ <code>fe80::be24:11ff:fe79:7afe%bridge1</code>  [1]</li>
<li>Distanceï¼š2 # (å»ºè®®ä½¿ç”¨å¤§äº1çš„ä½ä¼˜å…ˆçº§)</li>
<li>Routing Tableï¼š é€‰ä¸­åˆšåˆšæ–°å»ºçš„è·¯ç”±è¡¨ï¼Œä¾‹å¦‚ openwrt<br>ç‚¹å‡»Apply â†’ OKï¼Œä¿å­˜æäº¤ã€‚<br>ä½¿ç”¨å‘½ä»¤å¯¼å…¥ï¼š<br><code>/ipv6 route add dst-address=::/0 gateway=fe80::be24:11ff:fe79:7afe%bridge1 immediate-gateway=fe80::be24:11ff:fe79:7afe%bridge1 distance=2 routing-table=openwrt</code></li>
</ul>
<p>æ³¨ï¼šå¦‚æœ Gateway å¡«å†™çš„æ˜¯æœ¬åœ°é“¾è·¯ IPv6 åœ°å€ï¼Œå¦‚ fe80:: ï¼Œåˆ™éœ€è¦åœ¨åœ°å€åé¢åŠ ä¸Šæ¥å£åç§°æˆ–è€…ç½‘å£åç§°ï¼Œå¦‚ bridge1ï¼Œåˆ™ä¸º <code>fe80::be24:11ff:fe79:7afe%bridge1</code> ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯ ULA åœ°å€ï¼Œç›´æ¥åœ¨ Gateway å¤„å¡«å…¥ ULA åœ°å€å³å¯ï¼Œæ— éœ€æ¥å£åç§°</p>
<h3 id="é˜²ç«å¢™è®¾ç½®"><a href="#é˜²ç«å¢™è®¾ç½®" class="headerlink" title="é˜²ç«å¢™è®¾ç½®"></a>é˜²ç«å¢™è®¾ç½®</h3><h4 id="IPv4-é˜²ç«å¢™è§„åˆ™"><a href="#IPv4-é˜²ç«å¢™è§„åˆ™" class="headerlink" title="IPv4 é˜²ç«å¢™è§„åˆ™"></a>IPv4 é˜²ç«å¢™è§„åˆ™</h4><h5 id="è·³è¿‡æ—è·¯ç½‘å…³æµé‡"><a href="#è·³è¿‡æ—è·¯ç½‘å…³æµé‡" class="headerlink" title="è·³è¿‡æ—è·¯ç½‘å…³æµé‡"></a>è·³è¿‡æ—è·¯ç½‘å…³æµé‡</h5><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¹æ—è·¯ç½‘å…³å‘é€æ¥çš„æµé‡è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œä½¿å…¶è·³è¿‡æµé‡æ ‡è®°ï¼Œé¿å…è·¯ç”±ç¯è·¯<br>å·¦ä¾§ IP â†’ Firewall â†’ Mangleï¼Œæ–°å»ºä¸€æ¡ prerouting è§„åˆ™<br><img src="/images/2025/1_5.png" alt="IPv6 è·¯ç”±è¡¨"></p>
<blockquote>
<p>General</p>
</blockquote>
<ul>
<li>Src.Addressï¼š å¡«å†™æ—è·¯ç½‘å…³çš„IPåœ°å€</li>
<li>In.Interfaceï¼š é€‰æ‹©æ¡¥æ¥å£åå­—æˆ–è€…ç½‘å£åç§°ï¼Œå¦‚ bridge1ã€ether2</li>
</ul>
<blockquote>
<p>Advanced</p>
</blockquote>
<ul>
<li>Src.MAC Addressï¼š  å¡«å†™æ—è·¯ç½‘å…³æµé‡å‡ºå£çš„ MAC åœ°å€ï¼Œå’Œ Src.Address äºŒé€‰ä¸€å³å¯ã€‚</li>
</ul>
<blockquote>
<p>Action</p>
</blockquote>
<ul>
<li>Actionï¼š Accept ï¼ˆè¡¨ç¤ºé€šè¿‡å’Œè·³è¿‡ä¸‹åˆ—çš„é˜²ç«å¢™è§„åˆ™ï¼‰</li>
</ul>
<h5 id="å›½å¤–æµé‡æ ‡è®°"><a href="#å›½å¤–æµé‡æ ‡è®°" class="headerlink" title="å›½å¤–æµé‡æ ‡è®°"></a>å›½å¤–æµé‡æ ‡è®°</h5><p>å†æ–°å»ºä¸€æ¡ prerouting è§„åˆ™ç”¨äºæµé‡æ ‡è®°<br><img src="/images/2025/1_6.png" alt="IPv4 é˜²ç«å¢™è§„åˆ™"></p>
<blockquote>
<p>General</p>
</blockquote>
<ul>
<li>Dst.Address Listï¼š ç›®æ ‡åœ°å€åˆ—è¡¨ï¼Œé€‰æ‹© CN å’Œ å‰é¢çš„ç©ºç™½æ–¹å— [!] ï¼Œè¡¨ç¤ºç›®æ ‡åœ°å€ä¸åœ¨ CN åˆ—è¡¨ä¸­æ—¶æ‰å‘½ä¸­è§„åˆ™</li>
<li>Src.Address Listï¼š æºåœ°å€åˆ—è¡¨ï¼Œå¦‚æœå¸Œæœ›å±€åŸŸç½‘å†…åªæœ‰éƒ¨åˆ†è®¾å¤‡ä½¿ç”¨è¿™ä¸ªè‡ªåŠ¨åˆ†æµè§„åˆ™ï¼Œé‚£ä¹ˆå¯ä»¥è‡ªå·±å» Address List æ·»åŠ ä¸€ä¸ªåˆ—è¡¨ï¼Œç•™ç©ºæ—¶ä¸ºæ‰€æœ‰è®¾å¤‡</li>
</ul>
<blockquote>
<p>Extra</p>
</blockquote>
<ul>
<li>Dst.Address Typeï¼š ä¸‹æ‹‰é€‰æ‹© localï¼Œç„¶åç‚¹å‡»å‰é¢ç©ºç™½æ–¹å—ä¸º [!] ï¼Œå³ç›®æ ‡åœ°å€ä¸å±äºå±€åŸŸç½‘åœ°å€æ—¶æ‰å‘½ä¸­è§„åˆ™</li>
</ul>
<blockquote>
<p>Action</p>
</blockquote>
<ul>
<li>Actionï¼š  makr routing  é‡æ–°æ ‡è®°è·¯ç”±</li>
<li>New Routing Markï¼š é€‰æ‹©ä¹‹å‰æ·»åŠ çš„è·¯ç”±è¡¨</li>
<li>Passthroughï¼š å¦‚æœä¸‹æ–¹è¿˜éœ€è¦å¯¹è¿™æ¡æµé‡åšåˆ«çš„å¤„ç† ï¼Œåˆ™éœ€è¦å‹¾é€‰</li>
</ul>
<p>ä½¿ç”¨å‘½ä»¤å¯¼å…¥ï¼š</p>
<blockquote>
<p>my_device ä¸ºé˜²ç«å¢™è‡ªå®šä¹‰ Address List</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/ip firewall mangle</span><br><span class="line">add action=accept chain=prerouting in-interface=bridge1 src-address=\</span><br><span class="line">    192.168.1.250</span><br><span class="line">add action=mark-routing chain=prerouting dst-address-list=!CN \</span><br><span class="line">    dst-address-type=!local new-routing-mark=openwrt src-address-list=\</span><br><span class="line">    my_device</span><br></pre></td></tr></table></figure>

<p>æ³¨ï¼š</p>
<ol>
<li>å¿…é¡»ä¿è¯â€è·³è¿‡æµé‡æ ‡è®°â€çš„é˜²ç«å¢™è§„åˆ™åœ¨â€æµé‡æ ‡è®°â€è§„åˆ™çš„ä¸Šæ–¹</li>
<li>å¦‚æœéœ€è¦å°† DNS ä¿®æ”¹ä¸ºæ—è·¯ç½‘å…³ï¼Œéœ€æ£€æŸ¥ NAT è§„åˆ™ï¼Œç¡®ä¿æœªå¼€å¯ DNS åŠ«æŒï¼Œå¦‚æœä½¿ç”¨ DHCP æŒ‡å®šåˆ†é… DNS åˆ™ä¸éœ€è¦å…³é—­åŠ«æŒè§„åˆ™</li>
<li>æ£€æŸ¥ IP ä¼ªè£…è§„åˆ™ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯ WAN æ¥å£ä¼ªè£…ï¼Œéœ€è¦ä¿®æ”¹ä¸ºæ•´ä¸ªå±€åŸŸç½‘å­ç½‘æ®µï¼Œå¦åˆ™éœ€è¦åœ¨æ—è·¯ç½‘å…³é˜²ç«å¢™å¤„è®¾ç½® IP ä¼ªè£…è§„åˆ™<br>ï¼ˆ<em>æˆ–å‚è€ƒæ–‡æœ«â€å…¶ä»–è®¾ç½®â€ä¸­çš„å¤„ç†æ–¹æ¡ˆ</em>ï¼‰<br><img src="/images/2025/1_7.png" alt="IPv4 é˜²ç«å¢™è§„åˆ™"></li>
</ol>
<h4 id="IPv6-é˜²ç«å¢™è§„åˆ™"><a href="#IPv6-é˜²ç«å¢™è§„åˆ™" class="headerlink" title="IPv6 é˜²ç«å¢™è§„åˆ™"></a>IPv6 é˜²ç«å¢™è§„åˆ™</h4><h5 id="è·³è¿‡æ—è·¯ç½‘å…³æµé‡-1"><a href="#è·³è¿‡æ—è·¯ç½‘å…³æµé‡-1" class="headerlink" title="è·³è¿‡æ—è·¯ç½‘å…³æµé‡"></a>è·³è¿‡æ—è·¯ç½‘å…³æµé‡</h5><p>å·¦ä¾§ IP â†’ Firewall â†’ Mangleï¼Œæ–°å»ºä¸€æ¡ prerouting è§„åˆ™ï¼ŒIPv6 é€šå¸¸ä¸ºåŠ¨æ€å…¬ç½‘å•æ’­åœ°å€ï¼Œæ— æ³•ä½¿ç”¨ Src.Addressï¼Œéœ€è¦æ”¹ä¸º MAC åœ°å€ Src.MAC Address</p>
<blockquote>
<p>General</p>
</blockquote>
<ul>
<li>In.Interfaceï¼š é€‰æ‹©æ¡¥æ¥å£åå­—æˆ–è€…ç½‘å£åç§°ï¼Œå¦‚ bridge1ã€ether2</li>
</ul>
<blockquote>
<p>Advanced</p>
</blockquote>
<ul>
<li>Src.MAC Addressï¼š  å¡«å†™æ—è·¯ç½‘å…³æµé‡å‡ºå£çš„ MAC åœ°å€</li>
</ul>
<blockquote>
<p>Action</p>
</blockquote>
<ul>
<li>Actionï¼š Accept ï¼ˆè¡¨ç¤ºé€šè¿‡å’Œè·³è¿‡ä¸‹åˆ—çš„é˜²ç«å¢™è§„åˆ™ï¼‰</li>
</ul>
<h5 id="è·³è¿‡-ICMPv6-ND-å’Œ-DHCPv6-çš„æµé‡"><a href="#è·³è¿‡-ICMPv6-ND-å’Œ-DHCPv6-çš„æµé‡" class="headerlink" title="è·³è¿‡ ICMPv6 (ND) å’Œ DHCPv6 çš„æµé‡"></a>è·³è¿‡ ICMPv6 (ND) å’Œ DHCPv6 çš„æµé‡</h5><p>IPv6 é˜²ç«å¢™è§„åˆ™å’Œ IPv4 æœ‰ä¸€äº›åŒºåˆ«ï¼Œé™¤äº†â€è·³è¿‡æµé‡æ ‡è®°â€å’Œâ€æµé‡æ ‡è®°â€å¤–ï¼Œè¿˜éœ€è¦è·³è¿‡ ICMPv6 (ND) å’Œ DHCPv6 çš„æµé‡ï¼Œå¦åˆ™ä¼šé€ æˆ IPv6 ç½‘ç»œå¼‚å¸¸<br>ICMPv6(ND)ï¼š protocol&#x3D;58 (icmpv6)<br>DHCPv6ï¼šdst-port&#x3D;546-547 protocol&#x3D;udp<br><img src="/images/2025/1_8.png" alt="IPv6 é˜²ç«å¢™è§„åˆ™"></p>
<h5 id="å›½å¤–æµé‡æ ‡è®°-1"><a href="#å›½å¤–æµé‡æ ‡è®°-1" class="headerlink" title="å›½å¤–æµé‡æ ‡è®°"></a>å›½å¤–æµé‡æ ‡è®°</h5><p>IPV6 é€šå¸¸ä¸éœ€è¦å‹¾é€‰ [!]localï¼Œå› ä¸ºæµé‡éƒ½æ˜¯å…¬ç½‘å•æ’­åœ°å€ï¼ˆGUAï¼‰<br>åŒæ ·çš„åŸå› ï¼ŒIPv6 é˜²ç«å¢™æ— æ³•ä½¿ç”¨ Src.Address Listï¼Œå¦‚æœå¹¶éå…¨å±€åˆ†æµï¼Œéœ€è¦æ¯ä¸ªè®¾å¤‡ä¸€æ¡è§„åˆ™ï¼Œä½¿ç”¨ MAC åœ°å€<br><img src="/images/2025/1_9.png" alt="IPv6 é˜²ç«å¢™è§„åˆ™"></p>
<blockquote>
<p>General</p>
</blockquote>
<ul>
<li>Dst.Address Listï¼š ç›®æ ‡åœ°å€åˆ—è¡¨ï¼Œé€‰æ‹© CN å’Œ å‰é¢çš„ç©ºç™½æ–¹å— [!] ï¼Œè¡¨ç¤ºç›®æ ‡åœ°å€ä¸åœ¨ CN åˆ—è¡¨ä¸­æ—¶æ‰å‘½ä¸­è§„åˆ™</li>
</ul>
<blockquote>
<p>Advanced</p>
</blockquote>
<ul>
<li>Src.MAC Addressï¼š  å¡«å†™éœ€è¦åˆ†æµè®¾å¤‡çš„ MAC åœ°å€</li>
</ul>
<blockquote>
<p>Action</p>
</blockquote>
<ul>
<li>Actionï¼š  makr routing  é‡æ–°æ ‡è®°è·¯ç”±</li>
<li>New Routing Markï¼š é€‰æ‹©ä¹‹å‰æ·»åŠ çš„è·¯ç”±è¡¨</li>
<li>Passthroughï¼š å¦‚æœä¸‹æ–¹è¿˜éœ€è¦å¯¹è¿™æ¡æµé‡åšåˆ«çš„å¤„ç† ï¼Œåˆ™éœ€è¦å‹¾é€‰</li>
</ul>
<p>ä½¿ç”¨å‘½ä»¤å¯¼å…¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/ipv6 firewall mangle</span><br><span class="line">add action=accept chain=prerouting in-interface=bridge1 src-mac-address=\</span><br><span class="line">    AA:AA:AA:AA:AA:AA</span><br><span class="line">add action=accept chain=prerouting comment=&quot;Bypass ICMPv6 (ND)&quot; protocol=\</span><br><span class="line">    icmpv6</span><br><span class="line">add action=accept chain=prerouting comment=&quot;Bypass DHCPv6&quot; dst-port=546-547 \</span><br><span class="line">    protocol=udp</span><br><span class="line">add action=mark-routing chain=prerouting comment=&quot;My Device&quot; \</span><br><span class="line">    dst-address-list=!CN new-routing-mark=openwrt \</span><br><span class="line">    src-mac-address=BB:BB:BB:BB:BB:BB</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼š</p>
<ol>
<li>å¿…é¡»ä¿è¯â€è·³è¿‡æµé‡æ ‡è®°â€çš„é˜²ç«å¢™è§„åˆ™åœ¨â€æµé‡æ ‡è®°â€è§„åˆ™çš„ä¸Šæ–¹</li>
<li>å¦‚æœéœ€è¦å°† DNS ä¿®æ”¹ä¸ºæ—è·¯ç½‘å…³ï¼Œéœ€æ£€æŸ¥ NAT è§„åˆ™ï¼Œç¡®ä¿æœªå¼€å¯ DNS åŠ«æŒï¼Œå¦‚æœä½¿ç”¨ ND æŒ‡å®šåˆ†é… DNS åˆ™ä¸éœ€è¦å…³é—­åŠ«æŒè§„åˆ™</li>
<li>åœ¨èƒ½è¿‡è·å¾—å‰ç¼€çš„æƒ…å†µä¸‹ï¼ŒIPv6 é€šå¸¸ä¸éœ€è¦å¼€å¯ IP ä¼ªè£…ï¼Œå¦‚æœé”™è¯¯çš„å¼€å¯ IP ä¼ªè£…ï¼Œä¼šå¯¼è‡´å¤–éƒ¨æœåŠ¡å™¨åªèƒ½è·å–åˆ°ç½‘å…³ IPv6 åœ°å€ï¼Œè€ŒéçœŸå®çš„è®¾å¤‡ IPv6 åœ°å€<br><img src="/images/2025/1_10.png" alt="IPv6 é˜²ç«å¢™è§„åˆ™"></li>
</ol>
<h4 id="å…¼å®¹å®‰å“æ®‹ç–¾-IPv6"><a href="#å…¼å®¹å®‰å“æ®‹ç–¾-IPv6" class="headerlink" title="å…¼å®¹å®‰å“æ®‹ç–¾ IPv6"></a>å…¼å®¹å®‰å“æ®‹ç–¾ IPv6</h4><h5 id="IPv6-ND-è®¾ç½®"><a href="#IPv6-ND-è®¾ç½®" class="headerlink" title="IPv6 ND è®¾ç½®"></a>IPv6 ND è®¾ç½®</h5><p>æ€»æ‰€å‘¨çŸ¥ï¼Œå®‰å“çš„ IPv6 ç½‘ç»œåŠŸèƒ½æ„šè ¢åˆå¼±æ™ºï¼Œæ—¢ä¸æ”¯æŒ DHCPv6ï¼Œä¹Ÿä¸èƒ½æŒ‡å®š DNS åœ°å€ï¼Œä¹Ÿä¸æ”¯æŒç½‘å…³å®£å‘Šçš„ fe80 æœ¬åœ°é“¾è·¯ DNS åœ°å€ï¼Œåªèƒ½ä½¿ç”¨åŠ¨æ€çš„ GUAï¼ˆæˆ–è€…éœ€è¦åœ¨æœ¬åœ°é“¾è·¯æ³¨æ˜æ¥å£åç§°ï¼Ÿï¼‰ï¼Œè¿™ç»™åˆ†æµå¸¦æ¥äº†å¾ˆå¤šä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥å¦‚æœä½ ä½¿ç”¨çš„æ˜¯å®‰å“è®¾å¤‡ï¼Œåˆä¸æƒ³é€šè¿‡é˜²ç«å¢™æ‹’ç» ICMPv6 (ND) åŒ…æ¥ç¦ç”¨å®‰å“è®¾å¤‡çš„ IPv6 åŠŸèƒ½çš„è¯ï¼Œå¯ä»¥æŠŠ ND DNS è®¾ç½®æ¸…ç©º<br><img src="/images/2025/1_11.png" alt="IPv6 ND è®¾ç½®"></p>
<ul>
<li>åˆ é™¤ DNS åœ°å€ä¿¡æ¯</li>
<li>åœ¨ ND ä¿¡æ¯ä¸­ä¸åŒ…å« DNS åœ°å€<br>è¿™æ ·å¯ä»¥ä½¿å®‰å“è®¾å¤‡ä»…ä½¿ç”¨ IPv4 DNS åœ°å€<br><strong>ä½†è¿™å¯èƒ½ä¼šå› ä¸ºç¼ºå°‘ IPV6 DNSï¼Œé€ æˆéƒ¨åˆ†è®¾å¤‡éœ€è¦æ‰‹åŠ¨æŒ‡å®š DNS æ‰èƒ½ä¸Šç½‘ï¼Œå¦‚æŸäº›å•ç½‘å£çš„ OpenWrtï¼Œè°¨æ…ä½¿ç”¨</strong><br><strong>å¦‚æœé»˜è®¤è®¾ç½®æˆ–è€…åˆ†å‘ fe80:: DNS å¯ä»¥æ­£å¸¸ä¸Šç½‘æ—¶ï¼Œä¸å»ºè®®ä¿®æ”¹</strong></li>
</ul>
<h5 id="å…¶ä»–è®¾ç½®"><a href="#å…¶ä»–è®¾ç½®" class="headerlink" title="å…¶ä»–è®¾ç½®"></a>å…¶ä»–è®¾ç½®</h5><p>å…¶å®ç»è¿‡ä¸Šé¢çš„è®¾ç½®ä¹‹åï¼ŒåŸºæœ¬ä¸Šå·²ç»å¯ä»¥æ­£å¸¸ä¸Šç½‘äº†ï¼Œä½†å¦‚æœ IPv6 é˜²ç«å¢™å¼€å¯äº†ä¸¢å¼ƒæ— æ•ˆçš„è½¬å‘åŒ…ï¼Œéƒ¨åˆ†å®‰å“è®¾å¤‡ä¼šå› ä¸ºè·¯ç”±æ ‡è®°éå¯¹ç§°è·¯ç”±(?)ï¼Œé€ æˆ TCP æ¡æ‰‹æœªå®Œæˆä¸”åŒ…è¢«ä¸¢å¼ƒï¼Œé€ æˆ IPv6 æ— æ³•ä¸Šç½‘<br>æœ‰ä»¥ä¸‹å‡ ç§è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>ç›´æ¥å…³é—­â€ä¸¢å¼ƒæ— æ•ˆçš„è½¬å‘åŒ…â€è§„åˆ™<br><img src="/images/2025/1_12.png" alt="IPv6 ND è®¾ç½®"></li>
<li>æ–°å¢ä¸€æ¡ IPv6 ä¼ªè£…è§„åˆ™ï¼Œå°†åˆ†æµçš„æµé‡å‡ºå£åœ°å€ä¼ªè£…ä¸º RouterOS å‘å‡ºï¼Œä½¿å›ç¨‹æµé‡æ­£å¸¸å“åº”ï¼ˆåæ­£æœ¬æ¥å°±æ˜¯ä»£ç†æµé‡ï¼Œæ— æ‰€è°“å…¬ç½‘å’Œæ— æ³•å—…æ¢çœŸå®åœ°å€ï¼‰<br><img src="/images/2025/1_13.png" alt="IPv6 é˜²ç«å¢™è®¾ç½®"></li>
</ol>
<blockquote>
<p>General</p>
</blockquote>
<ul>
<li>Dst.Address Listï¼š ç›®æ ‡åœ°å€åˆ—è¡¨ï¼Œé€‰æ‹© CN å’Œ å‰é¢çš„ç©ºç™½æ–¹å— [!] ï¼Œè¡¨ç¤ºç›®æ ‡åœ°å€ä¸åœ¨ CN åˆ—è¡¨ä¸­æ—¶æ‰å‘½ä¸­è§„åˆ™</li>
<li>Routing Markï¼š é€‰æ‹©ä¹‹å‰æ·»åŠ çš„è·¯ç”±è¡¨ï¼Œè¡¨ç¤ºä»…å¤„ç†å·²è¢«æ ‡è®°çš„åŒ…</li>
</ul>
<blockquote>
<p>Action</p>
</blockquote>
<ul>
<li>Actionï¼š  masquerade  å°†æºåœ°å€ä» OpenWrt ä¼ªè£…ä¸º RouterOSï¼Œä»¥æ­£å¸¸å“åº”å›ç¨‹åŒ…</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/ipv6 firewall nat</span><br><span class="line">add action=masquerade chain=srcnat comment=&quot;defconf: masquerade IPv6&quot; \</span><br><span class="line">    dst-address-list=!CN routing-mark=openwrt</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>IPv4 å…¶å®ä¹Ÿå¯ä»¥è¿™æ ·å¤„ç†<br><img src="/images/2025/1_14.png" alt="IPv4 é˜²ç«å¢™è®¾ç½®"></li>
</ol>
]]></content>
      <categories>
        <category>RouterOS</category>
      </categories>
      <tags>
        <tag>RouterOS</tag>
        <tag>ROS</tag>
        <tag>ROS åˆ†æµ</tag>
        <tag>ROS IPv4 åˆ†æµ</tag>
        <tag>ROS IPv6åˆ†æµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Proxmox VEã€‘PVE é¦–é¡µæ˜¾ç¤º CPUã€ä¸»æ¿ã€NVMEã€ç¡¬ç›˜ æ¸©åº¦ç­‰ä¿¡æ¯</title>
    <url>/2022/06/18/%E3%80%90Proxmox%20VE%E3%80%91PVE%20%E9%A6%96%E9%A1%B5%E6%98%BE%E7%A4%BA%20CPU%E3%80%81%E4%B8%BB%E6%9D%BF%E3%80%81NVME%E3%80%81%E7%A1%AC%E7%9B%98%20%E6%B8%A9%E5%BA%A6%E7%AD%89%E4%BF%A1%E6%81%AF/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul>
<li></li>
</ul>
<p>ç½‘ä¸Šå„ç§ç‰ˆæœ¬çš„ PVE é¦–é¡µæ¸©åº¦ DIY è„šæœ¬ï¼Œä½†èåœé’èœå„æœ‰æ‰€çˆ±ï¼Œæ€»æ˜¯éš¾å¾—é‡åˆ°é’Ÿæƒ…çš„é‚£ä¸€æ¬¾<br>è‡ªè¡Œ DIY çš„è¯ï¼Œæ­£åˆ™ + js å…¥é—¨ç¡®å®éœ€è¦ç‚¹é—¨æ§›<br>æ‰€ä»¥è¿™é‡Œæä¾›å¦ä¸€ç§å®ç°æ–¹å¼ jsonï¼Œæ¸…æ™°æ˜äº†ï¼Œä¾¿äºé˜…è¯»ï¼Œä¿®æ”¹ç®€å•<br>æ— è®ºæ˜¯ æ¸©åº¦ã€é£æ‰‡è½¬é€Ÿã€ç¡¬ç›˜æ¸©åº¦ã€ç¡¬ç›˜ä¿¡æ¯éƒ½å¯ä»¥è½»æ¾æå®š</p>
<p><img src="/images/2022/6_1.png"><br><img src="/images/2022/6_2.png"></p>
<span id="more"></span>
<hr>
<h4 id="å‡ºé”™åŸå› åŠå¤„ç†æ–¹å¼"><a href="#å‡ºé”™åŸå› åŠå¤„ç†æ–¹å¼" class="headerlink" title="å‡ºé”™åŸå› åŠå¤„ç†æ–¹å¼"></a>å‡ºé”™åŸå› åŠå¤„ç†æ–¹å¼</h4><ol>
<li><strong>é¦–é¡µè½¬åœˆï¼Œåªæ˜¾ç¤ºä¸€éƒ¨åˆ†æ•°æ®</strong><br>ä¸€èˆ¬éƒ½æ˜¯ç”±äºå‚æ•°å€¼è¯»å–é”™è¯¯é€ æˆçš„<br>å‡è®¾ä»£ç ç‰‡æ®µä¸­æœ‰å¦‚ä¸‹å‚æ•°<br><code>var temperature = value[&#39;temperature&#39;][&#39;current&#39;].toFixed(1);</code><br>ä½†ç¡¬ç›˜ smartctl è¿”å›å€¼ä¸­æ²¡æœ‰æ¸©åº¦å€¼ã€æˆ–é”®å€¼åç§°ä¸ä¸€è‡´ï¼Œå°±ä¼šé€ æˆå‚æ•°è¯»å–é”™è¯¯ï¼Œé¦–é¡µè½¬åœˆ<br><img src="/images/2022/6_3.png"></li>
<li><strong>é¦–é¡µè½¬åœˆï¼Œæ‰€æœ‰è‡ªå®šä¹‰æ•°æ®éƒ½ä¸èƒ½æ˜¾ç¤º</strong><br>æ£€æŸ¥ CPU æ¸©åº¦ä»£ç æ®µï¼Œæ˜¯å¦æœ‰ä»£ç é”™è¯¯(å‚ç…§ç¬¬ä¸€æ¡)<br>å¦‚ä¿®æ”¹äº† Nodes.pm æ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨ systemctl restart pveproxy å‘½ä»¤é‡è½½ PVE ç•Œé¢<br>ä»…ä¿®æ”¹ js æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œæ— éœ€é‡è½½ PVE ç•Œé¢ï¼Œæµè§ˆå™¨å¼ºåˆ¶åˆ·æ–°å°±èƒ½çœ‹åˆ°ä¿®æ”¹åçš„ç»“æœ</li>
<li><strong>é¦–é¡µç™½å±ï¼Œä»€ä¹ˆéƒ½ä¸æ˜¾ç¤º</strong><br>ä¸€èˆ¬éƒ½æ˜¯ä»£ç æœ‰è¯¯å¼•èµ·çš„ï¼Œè¯·è¿˜åŸæ–‡ä»¶é‡æ–°æ“ä½œï¼Œæˆ–æ£€æŸ¥ä»£ç æ˜¯å¦ç¼ºå°‘ç›¸å¯¹åº”çš„ {} , () ç­‰ç¬¦å·</li>
<li><strong>ä¸­æ–‡ä¹±ç </strong><br>è¯·ä¸è¦å°†æ–‡ä»¶æ‹–åˆ°æœ¬åœ°ä½¿ç”¨ <strong>è®°äº‹æœ¬</strong> æ“ä½œï¼Œç›´æ¥åœ¨ <strong>WinSCP</strong> ä¸­æ“ä½œï¼Œæˆ–åœ¨æœ¬åœ°ä½¿ç”¨ <strong>Notepad</strong> ç­‰è½¯ä»¶è¿›è¡Œç¼–è¾‘<br>å¦‚æ“ä½œæ— è¯¯ä¾ç„¶ä¹±ç ï¼Œè¯·æ£€æŸ¥ç»ˆç«¯è½¯ä»¶åŠ <strong>WinSCP</strong> çš„ç¼–ç è®¾ç½®ï¼Œå¹¶åœ¨ PVE ç»ˆç«¯ä¸­è¾“å…¥<br><code>export LC_ALL=en_US.UTF-8</code></li>
<li><strong>æ— æŠ¥é”™ï¼Œä½†æ˜¾ç¤ºä¸å…¨</strong><br>å‚è€ƒæ–‡æœ«ï¼Œä¿®æ”¹æ˜¾ç¤ºèŒƒå›´</li>
</ol>
<hr>
<h4 id="å‰ç½®å‘½ä»¤"><a href="#å‰ç½®å‘½ä»¤" class="headerlink" title="å‰ç½®å‘½ä»¤"></a>å‰ç½®å‘½ä»¤</h4><p># æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">apt-get update</span><br></pre></td></tr></table></figure>
<p># å®‰è£…lm-sensorsï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">apt-get install lm-sensors patch</span><br></pre></td></tr></table></figure>
<p># åˆå§‹åŒ– sensors (ä¸€è·¯yesï¼Œå›è½¦):</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sensors-detect</span><br></pre></td></tr></table></figure>
<p># ç»™äºˆ smartctl æƒé™ (å¦‚ä¸éœ€è¦ç¡¬ç›˜ä¿¡æ¯å¯ä»¥å¿½ç•¥):</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod +s /usr/sbin/smartctl</span><br></pre></td></tr></table></figure>
<p># è®¾ç½® PVE ç¼–ç ä¸º UTF-8 (å¦‚ PVE å®‰è£…æ—¶æ­£ç¡®é€‰æ‹©äº† china åœ°åŒºå¯ä»¥å¿½ç•¥):</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export LC_ALL=en_US.UTF-8</span><br></pre></td></tr></table></figure>
<p># è·å–æ¸©åº¦ä¿¡æ¯ï¼ŒæŸ¥çœ‹å¯ä»¥è®¾ç½®çš„æ•°æ®ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sensors</span><br></pre></td></tr></table></figure>
<p># è¿™ä¸ªæ—¶å€™æ˜¯æ²¡æœ‰é£æ‰‡ç­‰ä¿¡æ¯çš„ï¼Œéœ€è¦é‡å¯ (å¦‚ä¸éœ€è¦é£æ‰‡è½¬é€Ÿä¿¡æ¯å¯ä»¥å¿½ç•¥)ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>

<h4 id="å¤‡ä»½åŸæ–‡ä»¶"><a href="#å¤‡ä»½åŸæ–‡ä»¶" class="headerlink" title="å¤‡ä»½åŸæ–‡ä»¶"></a>å¤‡ä»½åŸæ–‡ä»¶</h4><p>å¦‚å‘½ä»¤æœªé”™è¯¯è¾“å…¥ï¼Œæ–‡ä»¶å¤‡ä»½åœ¨åŸæ–‡ä»¶ç›¸åŒç›®å½•ä¸‹<br>å¦‚ ï¼š &#x2F;usr&#x2F;share&#x2F;perl5&#x2F;PVE&#x2F;API2&#x2F;Nodes.pm å¤‡ä»½ä¸º &#x2F;usr&#x2F;share&#x2F;perl5&#x2F;PVE&#x2F;API2&#x2F;Nodes.pm<strong>bak</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">proxmoxlib_js=&quot;/usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js&quot;</span><br><span class="line">Nodes_pm=&quot;/usr/share/perl5/PVE/API2/Nodes.pm&quot;</span><br><span class="line">pvemanagerlib_js=&quot;/usr/share/pve-manager/js/pvemanagerlib.js&quot;</span><br><span class="line">cp $&#123;proxmoxlib_js&#125; $&#123;proxmoxlib_js&#125;bak</span><br><span class="line">cp $&#123;Nodes_pm&#125; $&#123;Nodes_pm&#125;bak</span><br><span class="line">cp $&#123;pvemanagerlib_js&#125; $&#123;pvemanagerlib_js&#125;bak</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="æ‡’äººè¡¥ä¸æ³•ï¼ˆè‹¥æœªä¿®æ”¹è¿‡åŸæ–‡ä»¶ï¼Œå·²åŒ…å«é«˜åº¦ä¿®æ”¹ã€å»é™¤è®¢é˜…æç¤ºï¼Œå®½åº¦æœªæ›´æ”¹ï¼‰"><a href="#æ‡’äººè¡¥ä¸æ³•ï¼ˆè‹¥æœªä¿®æ”¹è¿‡åŸæ–‡ä»¶ï¼Œå·²åŒ…å«é«˜åº¦ä¿®æ”¹ã€å»é™¤è®¢é˜…æç¤ºï¼Œå®½åº¦æœªæ›´æ”¹ï¼‰" class="headerlink" title="æ‡’äººè¡¥ä¸æ³•ï¼ˆè‹¥æœªä¿®æ”¹è¿‡åŸæ–‡ä»¶ï¼Œå·²åŒ…å«é«˜åº¦ä¿®æ”¹ã€å»é™¤è®¢é˜…æç¤ºï¼Œå®½åº¦æœªæ›´æ”¹ï¼‰"></a>æ‡’äººè¡¥ä¸æ³•ï¼ˆè‹¥æœªä¿®æ”¹è¿‡åŸæ–‡ä»¶ï¼Œå·²åŒ…å«é«˜åº¦ä¿®æ”¹ã€å»é™¤è®¢é˜…æç¤ºï¼Œå®½åº¦æœªæ›´æ”¹ï¼‰</h4><p>å°†è¡¥ä¸æ–‡ä»¶æ”¾åˆ° <strong>&#x2F;tmp&#x2F;</strong> æ–‡ä»¶å¤¹<br>å¤§ç‰ˆæœ¬å‡çº§å¯èƒ½ä¾ç„¶éœ€è¦æ‰‹åŠ¨ä¿®æ”¹éƒ¨åˆ†ä»£ç ï¼Œè¡¥ä¸å¤±è´¥çš„æ–‡ä»¶åŠä»£ç è¡Œæ•°ä¼šåœ¨ patch è¿”å›å€¼ä¸­æ˜¾ç¤ºï¼Œè¯·ç•™æ„<br>å¦‚é‡é¡µé¢æ˜¾ç¤ºé”™è¯¯ï¼Œå‚ç…§ä¸Šæ–‡<br>ä¸ä¿è¯å¯ç”¨æ€§</p>
<p>2022&#x2F;06&#x2F;16<br>ä¸ºæ¯ä¸€ä¸ªå‚æ•°åŠ å…¥äº†åˆ¤æ–­è¯­å¥ï¼Œåº”è¯¥ä¸ä¼šå†å‡ºé”™äº†ï¼Œä½†æ˜¯å¤§æ¦‚å¯èƒ½ä¼šæ‹–æ…¢è¯»å–é€Ÿåº¦ 0.xx ç§’:<br>å¼ºè¿«ç—‡ã€å®Œç¾ä¸»ä¹‰è€…ã€éœ€è¦è‡ªè¡Œæ·»åŠ æ•°æ®ç­‰ï¼Œè‡ªè¡Œå‚ç…§æ³¨é‡Šç‰ˆæœ¬æ·»åŠ ä¿®æ”¹<br>M.2 ä¸ºç³»ç»Ÿç›˜ï¼Œæ— æ³•ä¼‘çœ è°ƒè¯•ï¼Œä»£ç æœªå¤„ç†ï¼Œéœ€è¦è‡ªè¡Œæ·»åŠ <br><a href="/download/PVE_7.2_temperatures.zip" target="_blank">PVE_7.2_temperatures.zip</a><br><a href="/download/PVE_8.0_temperatures.zip" target="_blank">PVE_8.0_temperatures.zip</a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åº”ç”¨è¡¥ä¸(è¯·ç¡®è®¤å·²ç»å¤‡ä»½åŸæ–‡ä»¶)</span></span><br><span class="line">patch $&#123;proxmoxlib_js&#125; &lt; /tmp/proxmoxlib_js.patch</span><br><span class="line">patch $&#123;Nodes_pm&#125; &lt; /tmp/Nodes_pm.patch</span><br><span class="line">patch $&#123;pvemanagerlib_js&#125; &lt; /tmp/pvemanagerlib_js.patch</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡è½½ PVE ç•Œé¢</span></span><br><span class="line">systemctl restart pveproxy</span><br></pre></td></tr></table></figure>

<h4 id="è‡ªè¡Œåˆ¶ä½œè¡¥ä¸"><a href="#è‡ªè¡Œåˆ¶ä½œè¡¥ä¸" class="headerlink" title="è‡ªè¡Œåˆ¶ä½œè¡¥ä¸"></a>è‡ªè¡Œåˆ¶ä½œè¡¥ä¸</h4><p>å¯ä»¥åœ¨é‡è£…æˆ–å‡çº§åå¿«é€Ÿä¿®æ”¹æ–‡ä»¶ï¼ˆå¤§ç‰ˆæœ¬å‡çº§å¯èƒ½éœ€è¦æ‰‹åŠ¨ä¿®æ”¹éƒ¨åˆ†ä»£ç ï¼‰<br>ç”Ÿæˆçš„è¡¥ä¸æ–‡ä»¶åœ¨ &#x2F;tmp&#x2F; æ–‡ä»¶å¤¹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">proxmoxlib_js=&quot;/usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js&quot;</span><br><span class="line">Nodes_pm=&quot;/usr/share/perl5/PVE/API2/Nodes.pm&quot;</span><br><span class="line">pvemanagerlib_js=&quot;/usr/share/pve-manager/js/pvemanagerlib.js&quot;</span><br><span class="line">diff -uN $&#123;proxmoxlib_js&#125;bak $&#123;proxmoxlib_js&#125;  &gt; /tmp/proxmoxlib_js.patch</span><br><span class="line">diff -uN $&#123;Nodes_pm&#125;bak $&#123;Nodes_pm&#125;  &gt; /tmp/Nodes_pm.patch</span><br><span class="line">diff -uN $&#123;pvemanagerlib_js&#125;bak $&#123;pvemanagerlib_js&#125;  &gt; /tmp/pvemanagerlib_js.patch</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="è‡ªè¡Œä¿®æ”¹æ–‡ä»¶"><a href="#è‡ªè¡Œä¿®æ”¹æ–‡ä»¶" class="headerlink" title="è‡ªè¡Œä¿®æ”¹æ–‡ä»¶"></a>è‡ªè¡Œä¿®æ”¹æ–‡ä»¶</h4><p><strong>ä¿®æ”¹ Nodes.pm æ–‡ä»¶</strong><br>&#x2F;usr&#x2F;share&#x2F;perl5&#x2F;PVE&#x2F;API2&#x2F;Nodes.pm<br>æœç´¢ï¼š$res-&gt;{pveversion} &#x3D; PVE::pvecfg::package()<br>ä¸‹æ–¹æ·»åŠ <br><img src="/images/2022/6_4.png"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">res-&gt;&#123;sensors_json&#125; = `sensors -j`; <span class="comment"># è·å– CPU ã€ä¸»æ¿æ¸©åº¦åŠé£æ‰‡è½¬é€Ÿ</span></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">res-&gt;&#123;smartctl_nvme_json&#125; = `smartctl -a -j /dev/nvme?`; <span class="comment"># è¯»å– nvme ç¡¬ç›˜ S.M.A.R.T. å€¼ï¼Œè·å–ç¡¬ç›˜å¯¿å‘½ã€å®¹é‡ã€æ¸©åº¦ç­‰</span></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">res-&gt;&#123;smartctl_sda_json&#125; = `smartctl -i -n standby /dev/sda|grep <span class="string">&quot;STANDBY&quot;</span> || smartctl -i -n standby /dev/sda|grep <span class="string">&quot;No such device&quot;</span> || smartctl -a -j /dev/sda`; <span class="comment">#å…ˆæ£€æµ‹ç¡¬ç›˜æ˜¯å¦ä¸ºä¼‘çœ çŠ¶æ€ï¼Œè‹¥å¦ï¼Œåˆ™æ£€æŸ¥ç£ç›˜æ˜¯å¦å­˜åœ¨ï¼Œè‹¥å¦ï¼Œåˆ™è¿”å› S.M.A.R.T. å€¼</span></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">res-&gt;&#123;smartctl_sdb_json&#125; = `smartctl -i -n standby /dev/sdb|grep <span class="string">&quot;STANDBY&quot;</span> || smartctl -i -n standby /dev/sdb|grep <span class="string">&quot;No such device&quot;</span> || smartctl -a -j /dev/sdb`; <span class="comment">#å…ˆæ£€æµ‹ç¡¬ç›˜æ˜¯å¦ä¸ºä¼‘çœ çŠ¶æ€ï¼Œè‹¥å¦ï¼Œåˆ™æ£€æŸ¥ç£ç›˜æ˜¯å¦å­˜åœ¨ï¼Œè‹¥å¦ï¼Œåˆ™è¿”å› S.M.A.R.T. å€¼</span></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">res-&gt;&#123;cpusensors&#125; = `lscpu | grep MHz`; <span class="comment"># è¯»å– CPU é¢‘ç‡</span></span></span><br></pre></td></tr></table></figure>

<p><strong>å…³äºè·å–ç¡¬ç›˜åç§°</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">lsblk | awk &#x27;$NF==&quot;disk&quot; &#123;print $1&#125;&#x27; | sort -u</span><br></pre></td></tr></table></figure>

<hr>
<p>ç»ˆç«¯è¾“å…¥ <code>sensors -j</code> å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ç±»ä¼¼ä¸‹é¢çš„ç»“æœï¼ˆä»¥ä¸‹ä¸º CPU æ¸©åº¦å€¼æˆªå–ï¼‰<br>å…ˆçœ¼ç†Ÿä¸€ä¸‹ JSON æ ¼å¼çš„è¿”å›å€¼ï¼Œç­‰ä¸‹ä¼šç”¨åˆ°</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;coretemp-isa-0000&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Adapter&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISA adapter&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Package id 0&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">         <span class="attr">&quot;temp1_input&quot;</span><span class="punctuation">:</span> <span class="number">38.000</span><span class="punctuation">,</span></span><br><span class="line">         <span class="attr">&quot;temp1_max&quot;</span><span class="punctuation">:</span> <span class="number">84.000</span><span class="punctuation">,</span></span><br><span class="line">         <span class="attr">&quot;temp1_crit&quot;</span><span class="punctuation">:</span> <span class="number">100.000</span><span class="punctuation">,</span></span><br><span class="line">         <span class="attr">&quot;temp1_crit_alarm&quot;</span><span class="punctuation">:</span> <span class="number">0.000</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Core 0&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">         <span class="attr">&quot;temp2_input&quot;</span><span class="punctuation">:</span> <span class="number">34.000</span><span class="punctuation">,</span></span><br><span class="line">         <span class="attr">&quot;temp2_max&quot;</span><span class="punctuation">:</span> <span class="number">84.000</span><span class="punctuation">,</span></span><br><span class="line">         <span class="attr">&quot;temp2_crit&quot;</span><span class="punctuation">:</span> <span class="number">100.000</span><span class="punctuation">,</span></span><br><span class="line">         <span class="attr">&quot;temp2_crit_alarm&quot;</span><span class="punctuation">:</span> <span class="number">0.000</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Core 1&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">         <span class="attr">&quot;temp3_input&quot;</span><span class="punctuation">:</span> <span class="number">38.000</span><span class="punctuation">,</span></span><br><span class="line">         <span class="attr">&quot;temp3_max&quot;</span><span class="punctuation">:</span> <span class="number">84.000</span><span class="punctuation">,</span></span><br><span class="line">         <span class="attr">&quot;temp3_crit&quot;</span><span class="punctuation">:</span> <span class="number">100.000</span><span class="punctuation">,</span></span><br><span class="line">         <span class="attr">&quot;temp3_crit_alarm&quot;</span><span class="punctuation">:</span> <span class="number">0.000</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¿®æ”¹ pvemanagerlib.js æ–‡ä»¶</strong><br>&#x2F;usr&#x2F;share&#x2F;pve-manager&#x2F;js&#x2F;pvemanagerlib.js<br>æœç´¢ PVE Manager Version<br>ä¸‹æ–¹æ·»åŠ <br><img src="/images/2022/6_5.png"></p>
<p>åŸå§‹ç‰ˆæœ¬åŠæ³¨é‡Š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	itemId: &#x27;thermal&#x27;,  // thermal ä»£è¡¨äº†è¿™ä¸€æ®µä»£ç çš„ id ï¼Œéšä¾¿æ”¹ä¸€ä¸‹ä¸è¦é‡å¤å°±è¡Œäº†</span><br><span class="line">	colspan: 2,</span><br><span class="line">	printBar: false,</span><br><span class="line">	title: gettext(&#x27;æ¸©åº¦&#x27;),  // è¿™é‡Œè¡¨ç¤ºä½ æƒ³åœ¨é¡µé¢ä¸­æ˜¾ç¤ºçš„å·¦ä¾§æ ‡é¢˜å</span><br><span class="line">	textField: &#x27;sensors_json&#x27;,  // è¿™é‡Œéœ€è¦å¡«å†™ Nodes.pm æ–‡ä»¶ä¸­å¯¹åº”çš„å‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯ä»å“ªä¸€ä¸ªè¿”å›å€¼ä¸­è·å–æ•°æ®</span><br><span class="line">	renderer: function(value) &#123;</span><br><span class="line">		value = JSON.parse(value);  // ä½¿ç”¨ JavaScript å†…ç½®å‡½æ•° JSON.parse() å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º JavaScript å¯¹è±¡</span><br><span class="line">		const cpu0 = value[&#x27;coretemp-isa-0000&#x27;][&#x27;Package id 0&#x27;][&#x27;temp1_input&#x27;].toFixed(1);  // è¿™é‡Œè¡¨ç¤ºè¯»å– CPU æ¸©åº¦ï¼Œå¯¹åº” sensors -j è¾“å‡ºçš„ JSON æ ¼å¼æ•°æ®ï¼ŒtoFixed(1) è¡¨ç¤ºå°†æ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ï¼Œåªä¿ç•™ (1) ä½å°æ•°</span><br><span class="line">		const PECI0 = value[&#x27;nct6798-isa-0290&#x27;][&#x27;PECI Agent 0&#x27;][&#x27;temp7_input&#x27;].toFixed(1); // åŒä¸Šï¼Œè‡ªè¡Œä¿®æ”¹</span><br><span class="line">		const pch = value[&#x27;pch_cometlake-virtual-0&#x27;][&#x27;temp1&#x27;][&#x27;temp1_input&#x27;].toFixed(1); // åŒä¸Šï¼Œè‡ªè¡Œä¿®æ”¹</span><br><span class="line">		return `CPU: $&#123;cpu0&#125;Â°C || å—æ¡¥: $&#123;pch&#125; â„ƒ | ç½‘å¡: $&#123;PECI0&#125; â„ƒ`; // return è¡¨ç¤ºè¾“å‡ºå€¼ï¼Œä¹Ÿå°±æ˜¯æœ€åæ˜¾ç¤ºåœ¨ WEB é¡µé¢ä¸­çš„å€¼ï¼Œ&#123;&#125;ä¸­å¡«å…¥ä¸Šå‡ è¡Œä¸­å®šä¹‰çš„å˜é‡ï¼Œæ ¼å¼è‡ªè¡Œè°ƒæ•´ </span><br><span class="line">	&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><strong><del>åŠ ä¸€ç‚¹ç»†èŠ‚</del></strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        <span class="attr">itemId</span>: <span class="string">&#x27;thermal&#x27;</span>,</span><br><span class="line">        <span class="attr">colspan</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">printBar</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">title</span>: <span class="title function_">gettext</span>(<span class="string">&#x27;æ¸©åº¦&#x27;</span>),</span><br><span class="line">        <span class="attr">textField</span>: <span class="string">&#x27;sensors_json&#x27;</span>,</span><br><span class="line">        <span class="attr">renderer</span>: <span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">                value = value.<span class="title function_">replace</span>(<span class="regexp">/temp([0-9]&#123;1,&#125;)_input/g</span>,<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line">                <span class="comment">// Intel</span></span><br><span class="line">                <span class="keyword">if</span> (value.<span class="title function_">indexOf</span>(<span class="string">&quot;coretemp-isa&quot;</span>) != -<span class="number">1</span> ) &#123;</span><br><span class="line">                        value = value.<span class="title function_">replace</span>(<span class="regexp">/coretemp-isa-(.&#123;4&#125;)/g</span>,<span class="string">&#x27;coretemp-isa&#x27;</span>);</span><br><span class="line">                        value = value.<span class="title function_">replace</span>(<span class="regexp">/nct6798-isa-(.&#123;4&#125;)/g</span>,<span class="string">&#x27;nct6798-isa&#x27;</span>);</span><br><span class="line">                        value = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(value);</span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> cpu_Intel = <span class="string">&#x27;CPU: &#x27;</span> + value[<span class="string">&#x27;coretemp-isa&#x27;</span>][<span class="string">&#x27;Package id 0&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> cpu_Intel = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> acpi = <span class="string">&#x27; || ä¸»æ¿:  &#x27;</span> + value[<span class="string">&#x27;acpitz-acpi-0&#x27;</span>][<span class="string">&#x27;temp1&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> acpi = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> pch = <span class="string">&#x27; || å—æ¡¥:  &#x27;</span> + value[<span class="string">&#x27;pch_cometlake-virtual-0&#x27;</span>][<span class="string">&#x27;temp1&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> pch = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> pci0 = <span class="string">&#x27; || ç½‘å¡:  &#x27;</span> + value[<span class="string">&#x27;nct6798-isa&#x27;</span>][<span class="string">&#x27;PECI Agent 0&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> pci0 = <span class="string">&#x27;&#x27;</span>;&#125;</span><br><span class="line">                        <span class="comment">// å¦‚æœå­˜åœ¨ä¸»æ¿ã€PCIç½‘å¡æ¸©åº¦,ä¼˜å…ˆæ˜¾ç¤º</span></span><br><span class="line">                        <span class="keyword">if</span> (cpu_Intel.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; pch.<span class="property">length</span> + acpi.<span class="property">length</span> + pci0.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;cpu_Intel&#125;</span><span class="subst">$&#123;acpi&#125;</span><span class="subst">$&#123;pch&#125;</span><span class="subst">$&#123;pci0&#125;</span>`</span>;</span><br><span class="line">                        <span class="comment">// å¦‚æœä¸å­˜åœ¨,æ˜¾ç¤º CPU å…¨æ ¸æ¸©åº¦,æœ€é«˜æ”¯æŒ 8 æ ¸å¿ƒ</span></span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cpu_Intel.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="keyword">try</span> &#123;<span class="keyword">var</span> cpu0 = <span class="string">&#x27; || æ ¸å¿ƒ 0 : &#x27;</span> + value[<span class="string">&#x27;coretemp-isa&#x27;</span>][<span class="string">&#x27;Core 0&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> cpu0 = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                                <span class="keyword">try</span> &#123;<span class="keyword">var</span> cpu1 = <span class="string">&#x27; | æ ¸å¿ƒ 1 : &#x27;</span> + value[<span class="string">&#x27;coretemp-isa&#x27;</span>][<span class="string">&#x27;Core 1&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> cpu1 = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                                <span class="keyword">try</span> &#123;<span class="keyword">var</span> cpu2 = <span class="string">&#x27; | æ ¸å¿ƒ 2 : &#x27;</span> + value[<span class="string">&#x27;coretemp-isa&#x27;</span>][<span class="string">&#x27;Core 2&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> cpu2 = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                                <span class="keyword">try</span> &#123;<span class="keyword">var</span> cpu3 = <span class="string">&#x27; | æ ¸å¿ƒ 3 : &#x27;</span> + value[<span class="string">&#x27;coretemp-isa&#x27;</span>][<span class="string">&#x27;Core 3&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> cpu3 = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                                <span class="keyword">try</span> &#123;<span class="keyword">var</span> cpu4 = <span class="string">&#x27; | æ ¸å¿ƒ 4 : &#x27;</span> + value[<span class="string">&#x27;coretemp-isa&#x27;</span>][<span class="string">&#x27;Core 4&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> cpu4 = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                                <span class="keyword">try</span> &#123;<span class="keyword">var</span> cpu5 = <span class="string">&#x27; | æ ¸å¿ƒ 5 : &#x27;</span> + value[<span class="string">&#x27;coretemp-isa&#x27;</span>][<span class="string">&#x27;Core 5&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> cpu5 = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                                <span class="keyword">try</span> &#123;<span class="keyword">var</span> cpu6 = <span class="string">&#x27; | æ ¸å¿ƒ 6 : &#x27;</span> + value[<span class="string">&#x27;coretemp-isa&#x27;</span>][<span class="string">&#x27;Core 6&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> cpu6 = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                                <span class="keyword">try</span> &#123;<span class="keyword">var</span> cpu7 = <span class="string">&#x27; | æ ¸å¿ƒ 7 : &#x27;</span> + value[<span class="string">&#x27;coretemp-isa&#x27;</span>][<span class="string">&#x27;Core 7&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> cpu7 = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                                <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;cpu_Intel&#125;</span><span class="subst">$&#123;cpu0&#125;</span><span class="subst">$&#123;cpu1&#125;</span><span class="subst">$&#123;cpu2&#125;</span><span class="subst">$&#123;cpu3&#125;</span><span class="subst">$&#123;cpu4&#125;</span><span class="subst">$&#123;cpu5&#125;</span><span class="subst">$&#123;cpu6&#125;</span><span class="subst">$&#123;cpu7&#125;</span>`</span>;</span><br><span class="line">                        &#125; </span><br><span class="line">                <span class="comment">// AMD</span></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value.<span class="title function_">indexOf</span>(<span class="string">&quot;amdgpu-pci&quot;</span>) != -<span class="number">1</span> ) &#123;</span><br><span class="line">                        value = value.<span class="title function_">replace</span>(<span class="regexp">/k10temp-pci-(.&#123;4&#125;)/g</span>,<span class="string">&#x27;k10temp-pci&#x27;</span>);</span><br><span class="line">                        value = value.<span class="title function_">replace</span>(<span class="regexp">/zenpower-pci-(.&#123;4&#125;)/g</span>,<span class="string">&#x27;zenpower-pci&#x27;</span>);</span><br><span class="line">                        value = value.<span class="title function_">replace</span>(<span class="regexp">/amdgpu-pci-(.&#123;4&#125;)/g</span>,<span class="string">&#x27;amdgpu-pci&#x27;</span>);</span><br><span class="line">                        value = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(value);</span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> cpu_amd_k10 = <span class="string">&#x27;CPU: &#x27;</span> + value[<span class="string">&#x27;k10temp-pci&#x27;</span>][<span class="string">&#x27;Tctl&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> cpu_amd_k10 = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> cpu_amd_zen = <span class="string">&#x27;CPU: &#x27;</span> + value[<span class="string">&#x27;zenpower-pci&#x27;</span>][<span class="string">&#x27;Tctl&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> cpu_amd_zen = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> amdgpu = <span class="string">&#x27; | GPU:  &#x27;</span> + value[<span class="string">&#x27;amdgpu-pci&#x27;</span>][<span class="string">&#x27;edge&#x27;</span>][<span class="string">&#x27;input&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> amdgpu = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;cpu_amd_k10&#125;</span><span class="subst">$&#123;cpu_amd_zen&#125;</span><span class="subst">$&#123;amdgpu&#125;</span>`</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">`æç¤º: CPU åŠ ä¸»æ¿ æ¸©åº¦è¯»å–å¼‚å¸¸`</span>;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;                </span><br><span class="line">        <span class="attr">itemId</span>: <span class="string">&#x27;nvme_ssd&#x27;</span>,</span><br><span class="line">        <span class="attr">colspan</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">printBar</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">title</span>: <span class="title function_">gettext</span>(<span class="string">&#x27;NVME&#x27;</span>),</span><br><span class="line">        <span class="attr">textField</span>: <span class="string">&#x27;smartctl_nvme_json&#x27;</span>,</span><br><span class="line">        <span class="attr">renderer</span>: <span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">                value = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(value);</span><br><span class="line">                <span class="keyword">if</span> (value[<span class="string">&#x27;model_name&#x27;</span>]) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> model_name = value[<span class="string">&#x27;model_name&#x27;</span>];&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> model_name = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> percentage_used = <span class="string">&#x27; | ä½¿ç”¨å¯¿å‘½: &#x27;</span> + value[<span class="string">&#x27;nvme_smart_health_information_log&#x27;</span>][<span class="string">&#x27;percentage_used&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">0</span>) + <span class="string">&#x27;% &#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> percentage_used = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> data_units_read = value[<span class="string">&#x27;nvme_smart_health_information_log&#x27;</span>][<span class="string">&#x27;data_units_read&#x27;</span>]*<span class="number">512</span>/<span class="number">1024</span>/<span class="number">1024</span>/<span class="number">1024</span>;<span class="keyword">var</span> data_units_read = <span class="string">&#x27;(è¯»: &#x27;</span> + data_units_read.<span class="title function_">toFixed</span>(<span class="number">2</span>) + <span class="string">&#x27;TB, &#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> data_units_read = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> data_units_written = value[<span class="string">&#x27;nvme_smart_health_information_log&#x27;</span>][<span class="string">&#x27;data_units_written&#x27;</span>]*<span class="number">512</span>/<span class="number">1024</span>/<span class="number">1024</span>/<span class="number">1024</span>;<span class="keyword">var</span> data_units_written = <span class="string">&#x27;å†™: &#x27;</span> + data_units_written.<span class="title function_">toFixed</span>(<span class="number">2</span>) + <span class="string">&#x27;TB)&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> data_units_written = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> power_on_time = <span class="string">&#x27; | é€šç”µ: &#x27;</span> + value[<span class="string">&#x27;power_on_time&#x27;</span>][<span class="string">&#x27;hours&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">0</span>) + <span class="string">&#x27;å°æ—¶&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> power_on_time = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> temperature = <span class="string">&#x27; | æ¸©åº¦: &#x27;</span> + value[<span class="string">&#x27;temperature&#x27;</span>][<span class="string">&#x27;current&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> temperature = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;model_name&#125;</span><span class="subst">$&#123;percentage_used&#125;</span><span class="subst">$&#123;data_units_read&#125;</span><span class="subst">$&#123;data_units_written&#125;</span><span class="subst">$&#123;power_on_time&#125;</span><span class="subst">$&#123;temperature&#125;</span>`</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">                        <span class="keyword">return</span> <span class="string">`æç¤º: æœªå®‰è£…ç¡¬ç›˜æˆ–å·²ç›´é€šç¡¬ç›˜æ§åˆ¶å™¨`</span>;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">        <span class="attr">itemId</span>: <span class="string">&#x27;SATA_sda&#x27;</span>,</span><br><span class="line">        <span class="attr">colspan</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">printBar</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">title</span>: <span class="title function_">gettext</span>(<span class="string">&#x27;SATA_sda&#x27;</span>),</span><br><span class="line">        <span class="attr">textField</span>: <span class="string">&#x27;smartctl_sda_json&#x27;</span>,</span><br><span class="line">        <span class="attr">renderer</span>: <span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (value.<span class="title function_">indexOf</span>(<span class="string">&quot;Device is in STANDBY mode&quot;</span>) != -<span class="number">1</span> ) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">`æç¤º: ç£ç›˜ä¼‘çœ ä¸­`</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value.<span class="title function_">indexOf</span>(<span class="string">&quot;No such device&quot;</span>) != -<span class="number">1</span> ) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">`æç¤º: æœªå®‰è£…ç¡¬ç›˜æˆ–å·²ç›´é€šç¡¬ç›˜æ§åˆ¶å™¨`</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                value = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(value);</span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> model_name = value[<span class="string">&#x27;model_name&#x27;</span>];&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> model_name = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> user_capacity = value[<span class="string">&#x27;user_capacity&#x27;</span>][<span class="string">&#x27;bytes&#x27;</span>]/<span class="number">1024</span>/<span class="number">1024</span>/<span class="number">1024</span>;<span class="keyword">var</span> user_capacity = <span class="string">&#x27; | å®¹é‡: &#x27;</span> + user_capacity.<span class="title function_">toFixed</span>(<span class="number">2</span>) + <span class="string">&#x27; GB&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> user_capacity = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> power_on_time = <span class="string">&#x27; | å·²é€šç”µ: &#x27;</span> + value[<span class="string">&#x27;power_on_time&#x27;</span>][<span class="string">&#x27;hours&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">0</span>) + <span class="string">&#x27; å°æ—¶&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> power_on_time = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> error_count = value[<span class="string">&#x27;ata_smart_error_log&#x27;</span>][<span class="string">&#x27;summary&#x27;</span>][<span class="string">&#x27;count&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">0</span>);<span class="keyword">if</span> (error_count != <span class="number">0</span>)&#123;error_count = <span class="string">&#x27; | ç£ç›˜é”™è¯¯: &#x27;</span> + error_count;&#125; <span class="keyword">else</span> &#123;<span class="keyword">var</span> error_count = <span class="string">&#x27;&#x27;</span>;&#125; &#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> error_count = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> self_count = value[<span class="string">&#x27;ata_smart_self_test_log&#x27;</span>][<span class="string">&#x27;standard&#x27;</span>][<span class="string">&#x27;error_count_total&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">0</span>);<span class="keyword">if</span> (self_count != <span class="number">0</span>)&#123;self_count = <span class="string">&#x27; | è‡ªæ£€é”™è¯¯: &#x27;</span> + self_count;&#125; <span class="keyword">else</span> &#123;<span class="keyword">var</span> self_count = <span class="string">&#x27;&#x27;</span>;&#125; &#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> self_count = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> temperature = <span class="string">&#x27; | æ¸©åº¦: &#x27;</span> + value[<span class="string">&#x27;temperature&#x27;</span>][<span class="string">&#x27;current&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> temperature = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;model_name&#125;</span><span class="subst">$&#123;user_capacity&#125;</span><span class="subst">$&#123;power_on_time&#125;</span><span class="subst">$&#123;error_count&#125;</span><span class="subst">$&#123;self_count&#125;</span><span class="subst">$&#123;temperature&#125;</span>`</span>;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">        <span class="attr">itemId</span>: <span class="string">&#x27;SATA_sdb&#x27;</span>,</span><br><span class="line">        <span class="attr">colspan</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">printBar</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">title</span>: <span class="title function_">gettext</span>(<span class="string">&#x27;SATA_sdb&#x27;</span>),</span><br><span class="line">        <span class="attr">textField</span>: <span class="string">&#x27;smartctl_sdb_json&#x27;</span>,</span><br><span class="line">        <span class="attr">renderer</span>: <span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (value.<span class="title function_">indexOf</span>(<span class="string">&quot;Device is in STANDBY mode&quot;</span>) != -<span class="number">1</span> ) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">`æç¤º: ç£ç›˜ä¼‘çœ ä¸­`</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value.<span class="title function_">indexOf</span>(<span class="string">&quot;No such device&quot;</span>) != -<span class="number">1</span> ) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">`æç¤º: æœªå®‰è£…ç¡¬ç›˜æˆ–å·²ç›´é€šç¡¬ç›˜æ§åˆ¶å™¨`</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                value = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(value);</span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> model_name = value[<span class="string">&#x27;model_name&#x27;</span>];&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> model_name = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> user_capacity = value[<span class="string">&#x27;user_capacity&#x27;</span>][<span class="string">&#x27;bytes&#x27;</span>]/<span class="number">1024</span>/<span class="number">1024</span>/<span class="number">1024</span>;<span class="keyword">var</span> user_capacity = <span class="string">&#x27; | å®¹é‡: &#x27;</span> + user_capacity.<span class="title function_">toFixed</span>(<span class="number">2</span>) + <span class="string">&#x27; GB&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> user_capacity = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> power_on_time = <span class="string">&#x27; | å·²é€šç”µ: &#x27;</span> + value[<span class="string">&#x27;power_on_time&#x27;</span>][<span class="string">&#x27;hours&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">0</span>) + <span class="string">&#x27; å°æ—¶&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> power_on_time = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> error_count = value[<span class="string">&#x27;ata_smart_error_log&#x27;</span>][<span class="string">&#x27;summary&#x27;</span>][<span class="string">&#x27;count&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">0</span>);<span class="keyword">if</span> (error_count != <span class="number">0</span>)&#123;error_count = <span class="string">&#x27; | ç£ç›˜é”™è¯¯: &#x27;</span> + error_count;&#125; <span class="keyword">else</span> &#123;<span class="keyword">var</span> error_count = <span class="string">&#x27;&#x27;</span>;&#125; &#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> error_count = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> self_count = value[<span class="string">&#x27;ata_smart_self_test_log&#x27;</span>][<span class="string">&#x27;standard&#x27;</span>][<span class="string">&#x27;error_count_total&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">0</span>);<span class="keyword">if</span> (self_count != <span class="number">0</span>)&#123;self_count = <span class="string">&#x27; | è‡ªæ£€é”™è¯¯: &#x27;</span> + self_count;&#125; <span class="keyword">else</span> &#123;<span class="keyword">var</span> self_count = <span class="string">&#x27;&#x27;</span>;&#125; &#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> self_count = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">try</span> &#123;<span class="keyword">var</span> temperature = <span class="string">&#x27; | æ¸©åº¦: &#x27;</span> + value[<span class="string">&#x27;temperature&#x27;</span>][<span class="string">&#x27;current&#x27;</span>].<span class="title function_">toFixed</span>(<span class="number">1</span>) + <span class="string">&#x27;Â°C&#x27;</span>;&#125; <span class="keyword">catch</span>(e) &#123;<span class="keyword">var</span> temperature = <span class="string">&#x27;&#x27;</span>;&#125; </span><br><span class="line">                        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;model_name&#125;</span><span class="subst">$&#123;user_capacity&#125;</span><span class="subst">$&#123;power_on_time&#125;</span><span class="subst">$&#123;error_count&#125;</span><span class="subst">$&#123;self_count&#125;</span><span class="subst">$&#123;temperature&#125;</span>`</span>;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">        <span class="attr">itemId</span>: <span class="string">&#x27;MHz&#x27;</span>,</span><br><span class="line">        <span class="attr">colspan</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">printBar</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">title</span>: <span class="title function_">gettext</span>(<span class="string">&#x27;CPUé¢‘ç‡&#x27;</span>),</span><br><span class="line">        <span class="attr">textField</span>: <span class="string">&#x27;cpusensors&#x27;</span>,</span><br><span class="line">        <span class="attr">renderer</span>:<span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line">                <span class="keyword">var</span> f0 = value.<span class="title function_">match</span>(<span class="regexp">/CPU MHz.*?([\d]+)/</span>)[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">var</span> f1 = value.<span class="title function_">match</span>(<span class="regexp">/CPU min MHz.*?([\d]+)/</span>)[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">var</span> f2 = value.<span class="title function_">match</span>(<span class="regexp">/CPU max MHz.*?([\d]+)/</span>)[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">return</span> <span class="string">`å®æ—¶: <span class="subst">$&#123;f0&#125;</span> MHz || æœ€å°: <span class="subst">$&#123;f1&#125;</span> MHz | æœ€å¤§: <span class="subst">$&#123;f2&#125;</span> MHz `</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯ PVE 8.0ï¼ŒCPU ä¸å†è¿”å›å®æ—¶é¢‘ç‡ï¼Œéœ€è¦ä¿®æ”¹ä¸ºä¸‹åˆ—ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        itemId: &#x27;MHz&#x27;,</span><br><span class="line">        colspan: 2,</span><br><span class="line">        printBar: false,</span><br><span class="line">        title: gettext(&#x27;CPUé¢‘ç‡&#x27;),</span><br><span class="line">        textField: &#x27;cpusensors&#x27;,</span><br><span class="line">        renderer:function(value)&#123;</span><br><span class="line">                var f1 = value.match(/CPU min MHz.*?([\d]+)/)[1];</span><br><span class="line">                var f2 = value.match(/CPU max MHz.*?([\d]+)/)[1];</span><br><span class="line">                var f0 = value.match(/CPU.*scaling MHz.*?([\d]+)/)[1];</span><br><span class="line">                var f0 = f0*f2/100;</span><br><span class="line">                return `å®æ—¶: $&#123;f0&#125; MHz || æœ€å°: $&#123;f1&#125; MHz | æœ€å¤§: $&#123;f2&#125; MHz `</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;,</span><br></pre></td></tr></table></figure>

<p><strong>ä¿®æ”¹æ˜¾ç¤ºèŒƒå›´</strong><br>ä¾ç„¶æ˜¯ pvemanagerlib.js æ–‡ä»¶<br>æœç´¢ widget.pveNodeStatus<br>å°† height: 300 ï¼ˆé»˜è®¤å€¼ï¼‰ æ”¹å¤§ä¸º 420ï¼Œæˆ–è€…æ›´å¤§ï¼Œç„¶åä¿å­˜ï¼ˆæ¯å¤šä¸€è¡Œå¤§æ¦‚å¢å¤§ 20~25ï¼‰<br><img src="/images/2022/6_6.png"></p>
<p><strong>é‡è½½ PVE ç•Œé¢</strong><br>ä¿®æ”¹å®Œæˆåé‡è½½ PVE ç•Œé¢<br>å¦‚æ— æŠŠæ¡ï¼Œå»ºè®®ä¸è¦ä¸€æ¬¡åŠ å…¥å¤ªå¤šä»£ç ï¼Œä¿®æ”¹ä¸€æ®µå°±é‡è½½ä¸€æ¬¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart pveproxy</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Proxmox VE</category>
      </categories>
      <tags>
        <tag>Proxmox VE</tag>
        <tag>PVE</tag>
        <tag>PVEæ¸©åº¦æ˜¾ç¤º</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€RouterOS(ROS)ã€‘è‡ªåŠ¨æ›´æ–°åˆ†æµè§„åˆ™</title>
    <url>/2022/06/09/%E3%80%90RouterOS(ROS)%E3%80%91%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E5%88%86%E6%B5%81%E8%A7%84%E5%88%99/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul>
<li><p>åˆ†æµè®¾ç½®å‚ç…§ ï¼š<a href="https://www.itxiaoniao.net/archives/448/" title="ROS åˆ†æµè®¾ç½®">ROS åˆ†æµè®¾ç½®</a></p>
</li>
<li><p>æ­¤å¤„ä¸å†è¯¦è¿°</p>
</li>
<li><p>ä¸‹è½½å¹¶å¯¼å…¥è§„åˆ™</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ä¸‹è½½æ–‡ä»¶</span><br><span class="line">/tool fetch url=http://www.iwik.org/ipcountry/mikrotik/CN</span><br><span class="line"># å…³é—­æ—¥å¿—è¾“å‡ºï¼Œé¿å…åˆ·å±</span><br><span class="line">/system logging disable 0</span><br><span class="line"># è½½å…¥åˆ—è¡¨</span><br><span class="line">/import file-name=CN</span><br><span class="line"># æ¢å¤æ—¥å¿—è¾“å‡ºè¾“å‡ºé€‰é¡¹</span><br><span class="line">/system logging enable 0</span><br><span class="line"># æŸ¥çœ‹å½“å‰åˆ—è¡¨æ•°é‡</span><br><span class="line">:local CN [:len [/ip firewall address-list find list=&quot;CN&quot;]]</span><br><span class="line"># åˆ é™¤æ–‡ä»¶</span><br><span class="line">/file remove [find name=&quot;CN&quot;]</span><br><span class="line"># å†™å…¥æ—¥å¿—</span><br><span class="line">:log info (&quot;CNåˆ—è¡¨æ›´æ–°:&quot;.&quot;$CN&quot;.&quot;æ¡è§„åˆ™&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="End"><a href="#End" class="headerlink" title="End"></a>End</h3>]]></content>
      <categories>
        <category>RouterOS</category>
      </categories>
      <tags>
        <tag>RouterOS</tag>
        <tag>ROS</tag>
        <tag>ROSè„šæœ¬</tag>
        <tag>ROSåˆ†æµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€RouterOS(ROS)ã€‘UPNP è®¾ç½® - è‡ªåŠ¨è€åŒ–åŠé‡æ‹¨åä¿®æ”¹ IP</title>
    <url>/2022/06/09/%E3%80%90RouterOS(ROS)%E3%80%91UPNP%E8%AE%BE%E7%BD%AE-%E8%87%AA%E5%8A%A8%E8%80%81%E5%8C%96%E5%8F%8A%E9%87%8D%E6%8B%A8%E5%90%8E%E4%BF%AE%E6%94%B9IP/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul>
<li><p>ä»¥ä¸‹è„šæœ¬å‘½ä»¤åŸºäº ROS 7.2.3ï¼Œå…¶ä»–ç‰ˆæœ¬ä¸ä¸€å®šé€‚ç”¨</p>
</li>
<li><p><strong>æ­¤è„šæœ¬åœ¨ 7.9 æˆ–æ›´æ—©å·²ç»å¤±æ•ˆï¼Œæ–°ç‰ˆæœ¬çš„ ROS ä¸å…è®¸åˆ é™¤åŠ¨æ€å¯¹è±¡</strong></p>
</li>
<li><p>ROS å¼€å¯ UPNP åï¼Œä¼šè‡ªåŠ¨æ˜ å°„ç«¯å£ï¼Œæ‰€ç”Ÿæˆçš„ç«¯å£æ˜ å°„å¯ä»¥åœ¨ IP - Firewall - NAT ä¸­æŸ¥è¯¢ï¼Œä½† ROS è‡ªåŠ¨ç”Ÿæˆçš„ç«¯å£æ˜ å°„æ²¡æœ‰è€åŒ–æ—¶é—´ï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œåˆ é™¤ï¼Œæˆ–ä½¿ç”¨è„šæœ¬è¿›è¡Œåˆ é™¤ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ç¼–å†™çš„è„šæœ¬ã€‚</p>
</li>
<li><p>upnp è€åŒ–ï¼ˆè‡ªè¡Œè®¾å®šå®šæ—¶æ‰§è¡Œï¼‰</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/ip firewall nat;</span><br><span class="line">:foreach singleRule in=[find where dynamic=yes] do=&#123;</span><br><span class="line"> :if ([:ping [get $singleRule to-addresses] count=2] &lt; 1) do=&#123;</span><br><span class="line">remove $singleRule</span><br><span class="line">:log warning &quot;*** åˆ é™¤ä¸å¯ç”¨çš„ upnp è§„åˆ™ ***&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ‹¨å·åè‡ªåŠ¨ä¿®æ”¹ dst-address ï¼ˆå»ºè®® pppoe æ¥å£ç»‘å®šæ‹¨å·è„šæœ¬ï¼Œç„¶ååœ¨ PPP - Profiles ä¸‹æ·»åŠ ï¼‰</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">:global addold</span><br><span class="line">:global addnew</span><br><span class="line">:set addnew [/interface get [/interface find name=&quot;pppoe-out1&quot;] running]</span><br><span class="line">:if ($addnew=true) do=&#123;</span><br><span class="line">:set addold [/ip address get [/ip address find dynamic=yes interface=&quot;pppoe-out1&quot;] address]</span><br><span class="line">:set addold [:pick $addold 0 ([:len $addold ] -3)]</span><br><span class="line">/ip firewall nat set [find dynamic=yes comment ~&quot;^upnp*.&quot;] dst-address=$addold</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="End"><a href="#End" class="headerlink" title="End"></a>End</h3>]]></content>
      <categories>
        <category>RouterOS</category>
      </categories>
      <tags>
        <tag>RouterOS</tag>
        <tag>ROS</tag>
        <tag>ROS UPNP</tag>
        <tag>ROSè„šæœ¬</tag>
      </tags>
  </entry>
  <entry>
    <title>ALL in one è®°å½•ä¸€ï¼ˆè´­ä¹°åŠç»„è£…ç¯‡-åä»£ä¸»æœº10400ï¼‰</title>
    <url>/2022/05/25/ALL%20in%20one%20%E8%AE%B0%E5%BD%95%E4%B8%80%EF%BC%88%E8%B4%AD%E4%B9%B0%E5%8F%8A%E7%BB%84%E8%A3%85%E7%AF%87-%E5%8D%81%E4%BB%A3%E4%B8%BB%E6%9C%BA10400%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰å› "><a href="#å‰å› " class="headerlink" title="å‰å› "></a>å‰å› </h2><p>å®¶é‡Œä½¿ç”¨çš„æ˜¯ J4125 å°ä¸»æœºï¼ŒåŸå…ˆåªæ˜¯ä¸ºäº†åšä¸ªè½¯è·¯ç”±ï¼Œç„¶åæŒ‚æŒ‚é’é¾™é¢æ¿è–…ç¾Šæ¯›ï¼Œä½†åæ¥ç”±äºåª³å¦‡æ˜¯åœ¨ç”¨ä¸ä¹ æƒ¯ç”µè§†çš„è§†é¢‘è½¯ä»¶ï¼ˆæ²¡æœ‰å¼¹å¹•ã€ä¼šå‘˜è´¹ç”¨é«˜ã€æ“ä½œä¸æ–¹ä¾¿ã€é›¶é›¶æ•£æ•£çš„ç‹¬å èŠ‚ç›®å¤ªå¤šåˆä¸æƒ³æ¯ä¸ªéƒ½å……ä¼šå‘˜ï¼‰</p>
<p>äºæ˜¯å°±åœ¨ J4125 ä¸Šé¢è™šæ‹ŸåŒ–äº†ä¸€ä¸ª Windows ä½œä¸º HTPC ä½¿ç”¨ï¼Œä½†è¿™å¯¹äº J4125 æ¥è¯´å®åœ¨æ˜¯å¤ªåƒåŠ›äº† </p>
<p><img src="/images/2022/1_1.png"></p>
<p>å°¤å…¶æ˜¯å½“åˆè£…ä¿®çš„æ—¶å€™æ²¡è§„åˆ’å¥½ï¼Œå¯¼è‡´å¼±ç”µè®¾å¤‡åªèƒ½æ”¾åœ¨é…’æŸœé‡Œï¼Œæ•£çƒ­ä¸å¤ªå¥½ï¼Œä¸€åˆ°å¤å¤©å°±å¼€å§‹è¿‡çƒ­é™é¢‘ï¼Œäºæ˜¯æ‰“ç®— 618 å…¥æ‰‹ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯æ²¡å¿ä½å‰æ‰‹ï¼Œå¸Œæœ› 618 ä¸ä¼šé­å—å¤ªå¤šèƒŒåˆºï¼ˆè™½ç„¶å¤§å¤šä¸œè¥¿éƒ½æ˜¯æµ·é²œå¸‚åœºè´­å…¥ï¼‰</p>
<p><img src="/images/2022/1_2.jpg" alt="å¼±ç”µæŸœ" title="å¼±ç”µæŸœ"></p>
<p>æµ·é²œå¸‚åœºé›¶é›¶æ•£æ•£æ·˜äº†ä¸€ä¸ªæœˆï¼Œå‰å‡ å¤©ç»ˆäºå°†é…ä»¶è´­ä¹°å®Œæˆã€‚</p>
<p>åœ¨è¿™é‡Œå¯¹è¸©è¿‡çš„å‘ï¼ŒPVE ç›´é€šã€è°ƒè¯•ç­‰åšä¸€ä¸ªè®°å½•ï¼Œé¿å…è‡ªå·±å¿˜è®°ï¼Œä¹Ÿå¸Œæœ›ç»™çœ‹åˆ°çš„ç½‘å‹å¸¦æ¥ä¸€ç‚¹å¸®åŠ©ã€‚</p>
<p><img src="/images/2022/1_3.jpg" alt="æˆå“å±•ç¤º" title="æˆå“å±•ç¤º"></p>
<p><img src="/images/2022/1_4.png" alt="åŠŸè€—ï¼ˆPVE æ‰“å¼€ ROS+openwrtï¼Œç©ºè½½çŠ¶æ€ï¼‰" title="åŠŸè€—ï¼ˆPVE æ‰“å¼€ ROS+openwrtï¼Œç©ºè½½çŠ¶æ€ï¼‰"></p>
<span id="more"></span>
<h2 id="é…ä»¶æ¸…å•å’Œé€‰è´­åŸå› "><a href="#é…ä»¶æ¸…å•å’Œé€‰è´­åŸå› " class="headerlink" title="é…ä»¶æ¸…å•å’Œé€‰è´­åŸå› "></a>é…ä»¶æ¸…å•å’Œé€‰è´­åŸå› </h2><p><img src="/images/2022/1_5.jpg" alt="è´­ä¹°å¤‡æ³¨" title="è´­ä¹°å¤‡æ³¨"></p>
<h4 id="æœºç®±ï¼ˆç¬¬ä¸€ä¸ªå‘ï¼‰ï¼š"><a href="#æœºç®±ï¼ˆç¬¬ä¸€ä¸ªå‘ï¼‰ï¼š" class="headerlink" title="æœºç®±ï¼ˆç¬¬ä¸€ä¸ªå‘ï¼‰ï¼š"></a>æœºç®±ï¼ˆç¬¬ä¸€ä¸ªå‘ï¼‰ï¼š</h4><p>ç»„è£… ITX æˆ–è€… MATX ä¸»æœºï¼Œä¸€å®šè¦å…ˆé€‰å¥½æœºç®±å†å›´ç»•æœºç®±é€‰è´­å…¶ä»–é…ä»¶ï¼Œæˆ‘ä¸€å¼€å§‹å°±æ˜¯æ²¡æŒ‘å¥½æœºç®±å°±å¼€å§‹ä¹°é…ä»¶ï¼Œæœ€ååˆæŠŠè¿˜åœ¨è·¯ä¸Šçš„ç”µæºç»™é€€äº†ï¼Œè€Œä¸”å¦‚æœæŠŠå†…å­˜æ¡æ’æ§½çš„æ•°é‡é™ä¸€é™ï¼Œè¿˜å¯ä»¥é€‰æ‹©æ›´å°çš„ä¸»æ¿ï¼Œä½†å½“æ—¶æˆ‘å·²ç»åœ¨æµ·é²œå¸‚åœºä¸Šä¹°å¥½äº†ä¸»æ¿ï¼Œäºæ˜¯æœºç®±é€‰èµ·æ¥å¾ˆè›‹ç–¼ï¼ŒèŠ±äº†æˆ‘å¾ˆä¹…çš„æ—¶é—´ </p>
<p>å› ä¸ºæŸœå­ç©ºé—´ä¸º 80cm<em>36cm</em>50cmï¼Œæ‰€ä»¥åªèƒ½é€‰æ‹©é•¿åº¦å°äº 32 çš„æœºç®±ï¼ˆè¿˜è¦è€ƒè™‘æ’å¤´é¢„ç•™é•¿åº¦ï¼‰ï¼Œæ‰€ä»¥ pass æ‰äº†å¾ˆå¤šæœºç®±ï¼Œå¤‡æ³¨éƒ½åœ¨ä¸Šå›¾ï¼Œæœ€ç»ˆé€‰æ‹©äº† å°å–†ä¼˜å“B3å…¨é“MATXæœºç®± è“è‰²æ¬¾ï¼Œ326<em>161</em>275</p>
<p>é»‘è‰²ç‰ˆè¿˜èƒ½ä¾¿å®œ 40 å—ï¼Œä½†é¢œç‹—è¿˜æ˜¯ä¹°äº†è“è‰²æ¬¾ã€‚</p>
<p><img src="/images/2022/1_6.jpg" alt="é…åˆå¼¯å¤´ç”µæºçº¿ï¼Œå°ºå¯¸å®Œç¾" title="é…åˆå¼¯å¤´ç”µæºçº¿ï¼Œå°ºå¯¸å®Œç¾"></p>
<h4 id="CPU"><a href="#CPU" class="headerlink" title="CPU:"></a>CPU:</h4><p>æˆ‘é€‰æ‹©äº† I5-10400ï¼ŒåŒä¸ºUHD630çš„æ ¸æ˜¾ï¼Œ i3-10100 åº”è¯¥å°±å¤Ÿç”¨äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æ¯”è¾ƒé¦‹ 8æ ¸16çº¿ç¨‹çš„ 10400ï¼Œå› ä¸ºéœ€è¦æŒ‚è½½çš„è™šæ‹Ÿæœºæ¯”è¾ƒå¤šï¼ŒRouterOS + OpenWrt + NAS + HassOS + Windows + CentOS ï¼Œè¿™é‡Œå¯ä»¥é™ä½éœ€æ±‚ï¼Œ8ä»£9ä»£çš„ä»·æ ¼çš„è¯ï¼Œè¿˜ä¸å¦‚ä¹°10ä»£ï¼Œè¿˜å¯ä»¥é€‰æ‹© QSRK ç­‰ä¸é™å‹å·çš„ CPUï¼Œè¿›ä¸€æ­¥å‹ç¼©ä»·æ ¼ã€‚<br>ï¼ˆJ4125å†æ¬¡ä¼ æ¥ä¸å ªé‡è´Ÿçš„å£°éŸ³ ï¼‰</p>
<p><img src="/images/2022/1_7.jpg" alt="CPU" title="CPU"></p>
<h4 id="ä¸»æ¿ï¼ˆç¬¬äºŒä¸ªå‘ï¼‰ï¼š"><a href="#ä¸»æ¿ï¼ˆç¬¬äºŒä¸ªå‘ï¼‰ï¼š" class="headerlink" title="ä¸»æ¿ï¼ˆç¬¬äºŒä¸ªå‘ï¼‰ï¼š"></a>ä¸»æ¿ï¼ˆç¬¬äºŒä¸ªå‘ï¼‰ï¼š</h4><p>æœ¬æ¥å’Œ CPU ä¸€æ ·ï¼Œæ‰“ç®— 618 äº¬ä¸œä¹°ç›’è£…ï¼Œä½†å› ä¸ºæ²¡å¿åˆ° 618ï¼Œæµ·é²œå¸‚åœºæ·˜äº†åæ“ Z490m pro4ï¼ˆæœ¬æ¥æ˜¯åœ¨ B460m pro4 ã€é’¢é“ä¼ å¥‡ã€B460M-HDV-Aä¹‹ä¸­é€‰ä¸€ä¸ªçš„ï¼Œä½†çªç„¶åˆ·åˆ°ä¸€ä¸ªæ²¡èƒŒæ¿çš„z490ï¼Œçœ‹åˆ°4ä¸ªPCIæ’æ§½ç›´æ¥å°±ä¹°äº†ï¼Œä½†å®é™…æ ¹æœ¬æ²¡ç”¨ä¸Š ï¼Œè¿˜å¯¼è‡´äº†æœºç®±å’Œç”µæºè´­ä¹°å·®ç‚¹ç¿»è½¦ï¼‰</p>
<p>è¿™é‡Œè¦é‡ç‚¹è¯´ä¸€ä¸‹ï¼Œ500ç³»åˆ—å› ä¸ºè¦å…¼å®¹ 10ã€11 ç³»çš„ CPUï¼Œå¯¼è‡´å¦‚æœä½¿ç”¨ 10 ç³» CPU çš„è¯ï¼Œå¾ˆå¤šä¸»æ¿ç¬¬ä¸€ä¸ª m.2 æ’æ§½æ˜¯æ— æ³•ä½¿ç”¨çš„ï¼Œè¿˜å¥½æ²¡ç­‰åˆ° 618 ï¼Œä¸ç„¶ä¹°äº† 560 æˆ‘å°±å‚»çœ¼äº†ã€‚</p>
<p>400ç³»ä¸»æ¿çš„è¯ï¼Œå› ä¸º 400 ç³»ä¸»æ¿è®¾è®¡åŸå› ï¼ŒåŸºæœ¬éƒ½æ˜¯å¦¥ååçš„äº§ç‰©ï¼Œæ ¹æ®ç½‘ä¸Šè¯„è®ºè¿˜æœ‰å‡ ä¸ªå¤§å‘</p>
<h5 id="1-åç¡•ç³»ä¸»æ¿"><a href="#1-åç¡•ç³»ä¸»æ¿" class="headerlink" title="1.åç¡•ç³»ä¸»æ¿"></a>1.åç¡•ç³»ä¸»æ¿</h5><p>å­˜åœ¨æ ¸æ˜¾æ— æ³•å¼€æœºçš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ BIOSã€äº®æœºå¡ç­‰æ“ä½œæ¢å¤ï¼ˆæ³¨æ„åˆ«ä¹°åˆ°ç›¸å…³å‹å·ï¼Œè¦ä¹°çš„è¯ï¼Œç¡®å®š BIOS å‡çº§å¯ä»¥è§£é”ï¼Œå¹¶å‡çº§ BIOSï¼‰</p>
<p>è¯¦è§ï¼š</p>
<p><a href="https://tieba.baidu.com/p/6758134915">https://tieba.baidu.com/p/6758134915</a></p>
<p><a href="https://tieba.baidu.com/p/7668455948">https://tieba.baidu.com/p/7668455948</a></p>
<h5 id="2-å¾®æ˜Ÿç³»ä¸»æ¿"><a href="#2-å¾®æ˜Ÿç³»ä¸»æ¿" class="headerlink" title="2.å¾®æ˜Ÿç³»ä¸»æ¿"></a>2.å¾®æ˜Ÿç³»ä¸»æ¿</h5><p>éƒ¨åˆ†ä¸»æ¿å­˜åœ¨ pciã€m.2 äº’ç›¸å†²çªï¼Œæ— æ³•æ’æ»¡æˆ–é™é€Ÿçš„é—®é¢˜ï¼Œå½“æ—¶æ€•æµ·é²œå¸‚åœºæ·˜ä¸»æ¿è®°é”™å‹å·ï¼Œæ²¡é€‰å¾®æ˜Ÿ</p>
<p>ä½†åˆšåˆšæœç™¾åº¦å‘ç°é—®é¢˜ä¸»è¦å­˜åœ¨360ã€450ã€560ä¸»æ¿ï¼Œå®Œå…¨æ²¡é—®é¢˜</p>
<p>è¯¦è§ï¼š</p>
<p><a href="https://nga.178.com/read.php?tid=19129452&forder_by=postdatedesc">https://nga.178.com/read.php?tid=19129452&amp;forder_by=postdatedesc</a></p>
<p><a href="https://www.chiphell.com/thread-2320570-1-1.html">https://www.chiphell.com/thread-2320570-1-1.html</a></p>
<p><a href="https://tieba.baidu.com/p/6761957926">https://tieba.baidu.com/p/6761957926</a></p>
<h5 id="3-æŠ€å˜‰ç³»ä¸»æ¿"><a href="#3-æŠ€å˜‰ç³»ä¸»æ¿" class="headerlink" title="3.æŠ€å˜‰ç³»ä¸»æ¿"></a>3.æŠ€å˜‰ç³»ä¸»æ¿</h5><p>æ²¡æœ‰ç†ç”±ï¼Œä¸ä¹°</p>
<h5 id="4-åæ“ç³»ä¸»æ¿"><a href="#4-åæ“ç³»ä¸»æ¿" class="headerlink" title="4.åæ“ç³»ä¸»æ¿"></a>4.åæ“ç³»ä¸»æ¿</h5><p>B460M RRO4ã€B460M é’¢é“ä¼ å¥‡ã€åæ“ B460M-HDV-Aã€åæ“ Z490M RRO4 å‡æ—  PCI ã€M.2 å†²çª</p>
<p>åæ“ç³»ä¸»æ¿å‡é€‰æ‹©äº† M.2 æ’æ§½å’Œ SATA å†²çªï¼Œæ’å…¥ç¬¬ä¸€ä¸ª M.2 ä¼šå¯¼è‡´ç¦ç”¨ä¸€ä¸ª SATA æ¥å£ï¼Œå¦‚æœæ˜¯ä¸ºäº† NAS ä½¿ç”¨æ…é€‰</p>
<p>è¯¦è§ï¼š</p>
<p><a href="https://www.asrock.com/mb/Intel/B460M%20Pro4/index.tw.asp#Specification">https://www.asrock.com/mb/Intel/B460M%20Pro4/index.tw.asp#Specification</a></p>
<h5 id="5-å…¶ä»–"><a href="#5-å…¶ä»–" class="headerlink" title="5.å…¶ä»–"></a>5.å…¶ä»–</h5><p>ç²¾åŠ›æœ‰é™ï¼Œæ²¡çœ‹</p>
<h4 id="ç”µæºï¼š"><a href="#ç”µæºï¼š" class="headerlink" title="ç”µæºï¼š"></a>ç”µæºï¼š</h4><p>å†é‡å¤ä¸€éï¼Œä¸€å®šè¦å…ˆé€‰å¥½æœºç®±å†ä¹° ä¸»æ¿ã€ç”µæºã€æ•£çƒ­å™¨</p>
<p>éƒ½æ€ªäº¬ä¸œé€äº†ä¸€å¼  -30 çš„ä¼˜æƒ åˆ¸ï¼Œä¹°äº† ATX ç”µæºï¼Œåæ¥å‘ç°è·Ÿ 24*24 çš„æ ‡å‡†æ¿æ”¾ä¸€èµ·ï¼Œç›´æ¥è¶…å°ºå¯¸ï¼Œäºæ˜¯è·¯ä¸Šå°±è¢«æˆ‘é€€äº†ã€‚</p>
<p>åŠŸç‡ç®—å‡ºæ¥æ»¡è½½æ˜¯ 100~150 ï¼Œä½†å®åœ¨æ‰¾ä¸åˆ°è¿™ä¹ˆå°çš„ç”µæºï¼Œç”¨ DC ç”µæºã€1U ä»€ä¹ˆçš„åˆæ€•ç¿»è½¦ï¼Œè€è€å®å®äº¬ä¸œä¹°äº† SFX é“œç‰Œ</p>
<h4 id="ç¡¬ç›˜ï¼š"><a href="#ç¡¬ç›˜ï¼š" class="headerlink" title="ç¡¬ç›˜ï¼š"></a>ç¡¬ç›˜ï¼š</h4><p>è¿˜æ˜¯å› ä¸ºæ€•ç¿»è½¦ï¼Œä¹°äº†ä¸‰æ˜Ÿï¼Œç®€å•è¯´ä¸€ä¸‹</p>
<p>970 EVO Plusï¼šé€Ÿåº¦å¿«ã€ä½†å‘çƒ­é‡é«˜ã€æœ‰ç¼“å­˜è®¾è®¡</p>
<p>980ï¼šé€Ÿåº¦æ…¢ä¸€äº›ï¼Œæ€§ä»·æ¯”é«˜ã€æ— ç¼“å­˜è®¾è®¡ã€å‘çƒ­ä½</p>
<p>å› ä¸ºæ‹…å¿ƒ PVE æ–­ç”µä¸¢é…ç½®å•¥çš„ï¼Œä¹°äº†æœ‰ç¼“å­˜çš„ 970  </p>
<h4 id="ç½‘å¡ï¼š"><a href="#ç½‘å¡ï¼š" class="headerlink" title="ç½‘å¡ï¼š"></a>ç½‘å¡ï¼š</h4><p>æœ¬æ¥æƒ³ä¹° I350 çš„ï¼Œå› ä¸ºé¦‹ SR-IOV ï¼Œä½†ä»·æ ¼å®åœ¨å¤ªé«˜äº†ï¼Œè¿˜éƒ½æ˜¯å¯¨å¡ï¼ˆæ‹…å¿ƒå•¸å«ç­‰é—®é¢˜ï¼‰ï¼Œæœ€åè¿˜æ˜¯ä¹°äº† I340 å¯Œå£«é€šç‰ˆæœ¬<br><img src="/images/2022/1_8.jpg" alt="I340" title="I340"></p>
<p>è½¯è·¯ç”±å¸¸è§å‹å·å’Œå¯¹æ¯”è¯¦è§ï¼š</p>
<p><a href="https://www.bilibili.com/read/cv15982632">https://www.bilibili.com/read/cv15982632</a></p>
<p>å¯¨å¡åˆ†è¾¨ç­‰ï¼š</p>
<p><a href="https://www.chiphell.com/thread-2148116-1-1.html">https://www.chiphell.com/thread-2148116-1-1.html</a></p>
<h4 id="æ•£çƒ­å™¨ï¼š"><a href="#æ•£çƒ­å™¨ï¼š" class="headerlink" title="æ•£çƒ­å™¨ï¼š"></a>æ•£çƒ­å™¨ï¼š</h4><p>å…¶å®è¿™ä¸ªæ˜¯æ— ç”¨éœ€æ±‚ï¼Œç©è™šæ‹Ÿæœºï¼Œæ”¾æŸœå­é‡Œçœ‹ä¸åˆ°ï¼Œæ‹·æœºæ¸©åº¦ä¸è¶…è¿‡60ï¼Œä¹°ä»€ä¹ˆ RGB ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ :fa-frown-o:</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å› ä¸ºé‡è¦çš„é…ä»¶ç›´æ¥äº¬ä¸œæŸå®ï¼Œæ‰€ä»¥çš„ç¡®æ²¡æœ‰ç¿»è½¦ï¼Œä½†å…¶å®ä»·æ ¼æ–¹é¢æ²¡æœ‰ä¾¿å®œå¾ˆå¤šï¼Œä½†å› ä¸ºé•¿å¹´å¤–åœ°å‡ºå·®ï¼Œæ‹…å¿ƒç¿»è½¦æ²¡æ³•å¤„ç†ï¼Œè¿˜æ˜¯æ²¡çœè¿™ä¸ªé’±ã€‚</p>
<p>æ²¡æ”¹åŠŸè€—å¢™ä»€ä¹ˆçš„ï¼Œæ‹·æœºçš„æ—¶å€™å…¨æ ¸ 4.0 åªèƒ½ä¿æŒå¤§æ¦‚ 20sï¼ˆåŠŸè€— 100wï¼‰ ï¼Œç„¶åå°±é™é¢‘åˆ° 3.2Gï¼ˆåŠŸè€— 65wï¼‰</p>
<p>æ²¡æ”¹ BIOS çš„è¯ï¼Œç©ºè½½ï¼ˆPVE åªå¼€ ROSã€openwrt ï¼Œæ— ç½‘ç»œè´Ÿè½½ï¼‰åŠŸè€—å¤§æ¦‚æ˜¯ 30<del>32wï¼Œç¨ç¨å¼€äº†ä¸€ç‚¹èŠ‚èƒ½é€‰é¡¹ï¼ˆCPU å¼€åˆ° C6ï¼‰ï¼Œå¾…æœºåŠŸç‡é™åˆ° 25</del>26wï¼Œç®—æ˜¯æ¯”è¾ƒæ»¡è¶³äº†</p>
<p>æœ¬æ¥è®¾ç½®äº†é£æ‰‡æŒ‰æ¸©åº¦å¼€å…³ï¼Œä½†å®é™…å‘ç°æ ¹æœ¬å¤šä¸äº†ä»€ä¹ˆåŠŸè€—ï¼Œç´¢æ€§ä¸€ç›´è½¬äº†ã€‚</p>
<p>åŠŸè€—æ–¹é¢ç¨ç¨æœ‰ç‚¹é«˜ï¼Œä¸»è¦åŸå› åº”è¯¥è¿˜æ˜¯ç”µæºä¹°å¤§äº†è½¬åŒ–ç‡ä¸å¤Ÿé«˜ï¼ˆå°è±¡é‡Œä¸€èˆ¬æ¥è¯´ç”µæº50%å·¦å³è½¬åŒ–ç‡æœ€é«˜ï¼ŒDC ç”µæºå°±æ›´å¥½ä¸€ç‚¹ï¼‰</p>
<p>æœºç®±çš„è¯è¿˜ç®—æ¯”è¾ƒå¥½è£…ï¼Œæ¯•ç«ŸæŒºå¤§çš„ï¼Œå”¯ä¸€è›‹ç–¼çš„å°±æ˜¯è£…äº†åº•éƒ¨é£æ‰‡ä¹‹åï¼Œç¬¬å››ä¸ª PCI æ’æ§½è¢«å®Œå…¨æŒ¡ä½äº†ï¼Œä»¥åå‡ä¸‡å…†å¤§æ¦‚åªèƒ½æ‹†é£æ‰‡ï¼Œæˆ–è€…æ¢ X1 æ’æ§½çš„åƒå…†å¡äº†ã€‚</p>
<p>æ€»ä½“æ¥è¯´æ¯”è¾ƒæ»¡æ„ã€‚</p>
<p>ä¸‹ä¸€ç¯‡å†å†™ PVE çš„å®‰è£… å’Œç›´é€šç­‰ã€‚</p>
<p><img src="/images/2022/1_9.jpg" alt="æœºç®±å†…éƒ¨" title="æœºç®±å†…éƒ¨"></p>
<p><img src="/images/2022/1_10.jpg" alt="ç‚¹äº®å’Œæ‹·æœºæµ‹è¯•" title="ç‚¹äº®å’Œæ‹·æœºæµ‹è¯•"></p>
<p><img src="/images/2022/1_11.jpg" alt="å¨±ä¹å¤§å¸ˆè·‘åˆ†" title="å¨±ä¹å¤§å¸ˆè·‘åˆ†"></p>
<p><img src="/images/2022/1_12.png" alt=" " title=" "></p>
<h3 id="End"><a href="#End" class="headerlink" title="End"></a>End</h3>]]></content>
  </entry>
  <entry>
    <title>ALL in one è®°å½•äºŒï¼ˆPVE åˆè£…è®¾ç½®&amp;æ ¸æ˜¾ç›´é€š&amp;HTPCç›¸å…³è®¾ç½®ï¼‰</title>
    <url>/2022/05/25/ALL%20in%20one%20%E8%AE%B0%E5%BD%95%E4%BA%8C%EF%BC%88PVE%20%E5%88%9D%E8%A3%85%E8%AE%BE%E7%BD%AE%E3%80%81%E6%A0%B8%E6%98%BE%E7%9B%B4%E9%80%9A%E3%80%81HTPC%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å› ä¸ºæ–°è´­å…¥äº†ä¸»æœºï¼Œéœ€è¦é‡æ–°è°ƒè¯• PVE ï¼Œåœ¨è¿™é‡Œåšä¸€äº›è®°å½•</p>
<h2 id="PVEåˆè£…"><a href="#PVEåˆè£…" class="headerlink" title="PVEåˆè£…"></a>PVEåˆè£…</h2><h4 id="1-BIOSè®¾ç½®"><a href="#1-BIOSè®¾ç½®" class="headerlink" title="1. BIOSè®¾ç½®"></a>1. BIOSè®¾ç½®</h4><p>1ï¼‰debian é»˜è®¤ BIOS æ—¶é—´ä¸º UTC æ—¶é—´ï¼Œæ—¶é—´ä¸å¯¹çš„æƒ…å†µä¸‹ä¼šé€ æˆä¸»æœºå¼€å¯å…³é—­çŠ¶æ€æ˜¾ç¤ºä¸æ­£å¸¸ï¼Œå¹¶é€ æˆä»¤ç‰ŒéªŒè¯å¤±è´¥é¢‘ç¹é€€å‡ºç™»å½•ï¼Œæ‰€ä»¥æœ€å¥½è°ƒæ•´ BIOS æ—¶é—´ä¸º UTC æ—¶é—´<br>PVE å®‰è£…æ—¶é—´åŒæ­¥è½¯ä»¶ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯åˆè£…ç”µè„‘ï¼Œå¼€æœºç½‘ç»œä¸é€šçš„æ—¶å€™è™šæ‹Ÿæœºå¼€å…³ä¼šé€ æˆä»¥ä¸Šé—®é¢˜ï¼Œæ‰€ä»¥æ¨èç›´æ¥æ”¹ BIOS æ—¶é—´<br>2ï¼‰ç¡®è®¤å¼€å¯è™šæ‹ŸåŒ–<br>æ ¹æ®éœ€è¦ç¡®è®¤å¼€å¯æˆ–å…³é—­ CSM ã€CPU èŠ‚èƒ½ã€æ¿è½½å£°å¡ã€æ¥ç”µè‡ªå¯åŠ¨ç­‰é€‰é¡¹ï¼ˆCPU C6&#x2F;C7&#x2F;C10 ç­‰èŠ‚èƒ½è¯·ç¡®è®¤ç¡¬ä»¶æ”¯æŒå†å¼€å¯ï¼Œä»¥å…é€ æˆä½è´Ÿè½½éšæœºæ­»æœºï¼‰</p>
<h4 id="2-PVEå®‰è£…"><a href="#2-PVEå®‰è£…" class="headerlink" title="2. PVEå®‰è£…"></a>2. PVEå®‰è£…</h4><p>å®˜ç½‘ä¸‹è½½é•œåƒï¼š<a href="https://www.proxmox.com/en/downloads">https://www.proxmox.com/en/downloads</a><br>ä½¿ç”¨ Uç›˜åˆ»å½•è½¯ä»¶åˆ»å½•å³å¯ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯ balenaEtcher<br>ä¸ºäº†æ–¹ä¾¿è®¾ç½®ç®¡ç†å£ï¼Œåªæ’ä¸Šä¸€æ ¹è‡ªåŠ¨åˆ†é…IPçš„ç½‘çº¿åˆ°è¦è¦è®¾ç½®çš„ç®¡ç†å£ä¸Šï¼ŒIP å¯ä»¥åœ¨å®‰è£…ç•Œé¢ä¸Šæ›´æ”¹ï¼Œä¸»è¦æ˜¯ä¸ºäº†åˆ†è¾¨ç½‘å£ç¼–å·<br>ï¼ˆå°½é‡ä¸è¦ä½¿ç”¨æ¿è½½ç½‘å¡ï¼Œæœ‰äº›ä¸»æ¿å®˜æ–¹å†…æ ¸æ¿è½½ç½‘å¡ã€æ¿è½½å£°å¡ç­‰è®¾å¤‡æ— æ³•æ‹†åˆ†ï¼Œä¼šå¯¼è‡´åç»­å£°å¡ç›´é€šæ—¶å‡ºé—®é¢˜ï¼Œæˆ‘è¿™é‡Œä» I340T4 é‡Œé¢é€‰äº†ä¸€ä¸ªå£ä½œä¸ºç®¡ç†å£ä½¿ç”¨ï¼‰</p>
<h4 id="3-PVEè®¾ç½®"><a href="#3-PVEè®¾ç½®" class="headerlink" title="3. PVEè®¾ç½®"></a>3. PVEè®¾ç½®</h4><h5 id="1ï¼‰åˆ é™¤-local-lvm-åˆ†åŒºï¼Œåªç•™ä¸‹-local-åˆ†åŒº"><a href="#1ï¼‰åˆ é™¤-local-lvm-åˆ†åŒºï¼Œåªç•™ä¸‹-local-åˆ†åŒº" class="headerlink" title="1ï¼‰åˆ é™¤ local-lvm åˆ†åŒºï¼Œåªç•™ä¸‹ local åˆ†åŒº"></a>1ï¼‰åˆ é™¤ local-lvm åˆ†åŒºï¼Œåªç•™ä¸‹ local åˆ†åŒº</h5><p>é¿å…ç©ºé—´æµªè´¹ï¼Œè€Œä¸” PVE é¦–é¡µä¸Šæ˜¾ç¤ºçš„ç©ºé—´å‰©ä½™æŒ‡çš„æ˜¯ local åˆ†åŒºï¼Œæˆ‘ä½¿ç”¨ J4125 çš„æ—¶å€™å°±å‘ç”Ÿè¿‡ä¸€æ¬¡ local-lvm å¡æ»¡é€ æˆçš„ IO-errï¼Œæ¨èæ–°è£… PVE æ—¶è¿›è¡Œè®¾ç½®ï¼Œä¸ç„¶è¿˜è¦å¤‡ä»½è¿˜åŸè™šæ‹Ÿæœºï¼Œæ¯”è¾ƒéº»çƒ¦</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">lvremove pve/data</span><br><span class="line">lvextend -l +100%FREE -r pve/root</span><br></pre></td></tr></table></figure>
<p>æ•°æ®ä¸­å¿ƒ-å­˜å‚¨-åˆ é™¤local-lvm<br>é€‰æ‹©localï¼Œç¼–è¾‘ï¼Œåœ¨å†…å®¹é‡Œæ·»åŠ ç£ç›˜æ˜ åƒå’Œå®¹å™¨<br>å¦‚æœéœ€è¦è¿˜åŸä¹‹å‰çš„è™šæ‹Ÿæœºï¼Œåˆ™éœ€è¦ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼ˆæ— æ³•ä½¿ç”¨ WEB é¡µé¢è¿˜åŸï¼Œå› ä¸ºå‚¨å­˜ä½ç½®ä¸ä¸€è‡´ï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">qmrestore /var/lib/vz/dump/vzdump-qemu-101-2022_05_19-19_07_41.vma.zst 101 -storage local</span><br></pre></td></tr></table></figure>
<h5 id="2ï¼‰æ¢æºã€å…³é—­è®¢é˜…ã€é¦–é¡µæ¸©åº¦æç¤ºç­‰æ“ä½œ"><a href="#2ï¼‰æ¢æºã€å…³é—­è®¢é˜…ã€é¦–é¡µæ¸©åº¦æç¤ºç­‰æ“ä½œ" class="headerlink" title="2ï¼‰æ¢æºã€å…³é—­è®¢é˜…ã€é¦–é¡µæ¸©åº¦æç¤ºç­‰æ“ä½œ"></a>2ï¼‰æ¢æºã€å…³é—­è®¢é˜…ã€é¦–é¡µæ¸©åº¦æç¤ºç­‰æ“ä½œ</h5><p>å‚è€ƒï¼š<br><a href="https://github.com/xiangfeidexiaohuo/ProxmoxVE-7.0-DIY">https://github.com/xiangfeidexiaohuo/ProxmoxVE-7.0-DIY</a><br><a href="http://songw.top/archives/748.html">http://songw.top/archives/748.html</a><br><a href="https://zry.io/archives/285">https://zry.io/archives/285</a></p>
<span id="more"></span>
<p>3ï¼‰ä¸»é¡µæ˜¾ç¤ºæ¸©åº¦<br>ä½¿ç”¨ç¯å¢ƒï¼š<br>sensors æœ‰é£æ‰‡ï¼ˆfan:ï¼‰ã€CPUæ¸©åº¦ï¼ˆPackage id 0:ï¼‰ã€PCIæ¸©åº¦ï¼ˆPECI Agent 0: ï¼‰è¾“å‡ºï¼Œä¸€å— NVMEã€ä¸¤å— SATA<br>æ©å±±ä»£ç å·²åšç©ºå€¼é”™è¯¯å¤„ç†<br>è¯¦ç»†è¯´æ˜ï¼š<br><a href="https://www.right.com.cn/forum/thread-8236620-1-1.html">https://www.right.com.cn/forum/thread-8236620-1-1.html</a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨ï¼š</span></span><br><span class="line">apt-get update </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…lm-sensorsï¼š</span></span><br><span class="line">apt-get install lm-sensors</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆå§‹åŒ– sensors(ä¸€è·¯<span class="built_in">yes</span>ï¼Œå›è½¦)ï¼š</span></span><br><span class="line">sensors-detect</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç»™äºˆ smartctl æƒé™ï¼ˆå¦‚ä¸éœ€è¦ç¡¬ç›˜ä¿¡æ¯å¯ä»¥å¿½ç•¥ï¼‰</span></span><br><span class="line">chmod +s /usr/sbin/smartctl</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è·å–æ¸©åº¦ä¿¡æ¯ï¼š</span></span><br><span class="line">sensors</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿™ä¸ªæ—¶å€™æ˜¯æ²¡æœ‰é£æ‰‡ç­‰ä¿¡æ¯çš„ï¼Œéœ€è¦é‡å¯ï¼š</span></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤‡ä»½</span></span><br><span class="line">proxmoxlib_js=&quot;/usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js&quot;</span><br><span class="line">Nodes_pm=&quot;/usr/share/perl5/PVE/API2/Nodes.pm&quot;</span><br><span class="line">pvemanagerlib_js=&quot;/usr/share/pve-manager/js/pvemanagerlib.js&quot;</span><br><span class="line">cp $&#123;proxmoxlib_js&#125; $&#123;proxmoxlib_js&#125;bak</span><br><span class="line">cp $&#123;Nodes_pm&#125; $&#123;Nodes_pm&#125;bak</span><br><span class="line">cp $&#123;pvemanagerlib_js&#125; $&#123;pvemanagerlib_js&#125;bak</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åº”ç”¨è¡¥ä¸</span></span><br><span class="line">patch $&#123;proxmoxlib_js&#125; &lt; /tmp/proxmoxlib_js.patch</span><br><span class="line">patch $&#123;Nodes_pm&#125; &lt; /tmp/Nodes_pm.patch</span><br><span class="line">patch $&#123;pvemanagerlib_js&#125; &lt; /tmp/pvemanagerlib_js.patch</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡è½½ PVE ç•Œé¢</span></span><br><span class="line">systemctl restart pveproxy</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ¶ä½œè¡¥ä¸</span></span><br><span class="line">proxmoxlib_js=&quot;/usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js&quot;</span><br><span class="line">Nodes_pm=&quot;/usr/share/perl5/PVE/API2/Nodes.pm&quot;</span><br><span class="line">pvemanagerlib_js=&quot;/usr/share/pve-manager/js/pvemanagerlib.js&quot;</span><br><span class="line">diff -uN $&#123;proxmoxlib_js&#125;bak $&#123;proxmoxlib_js&#125;  &gt; /tmp/proxmoxlib_js.patch</span><br><span class="line">diff -uN $&#123;Nodes_pm&#125;bak $&#123;Nodes_pm&#125;  &gt; /tmp/Nodes_pm.patch</span><br><span class="line">diff -uN $&#123;pvemanagerlib_js&#125;bak $&#123;pvemanagerlib_js&#125;  &gt; /tmp/pvemanagerlib_js.patch</span><br></pre></td></tr></table></figure>
<p><img src="/images/2022/2_1.png" alt="é¡µé¢æ•ˆæœ"></p>
<h4 id="4-ç›´é€šç¯‡"><a href="#4-ç›´é€šç¯‡" class="headerlink" title="4. ç›´é€šç¯‡"></a>4. ç›´é€šç¯‡</h4><p>å¤§åŒå°å¼‚ï¼Œåªè¯´ä¸€äº›å‘å’Œä¸€äº›é…ç½®è¯´æ˜</p>
<h5 id="1ï¼‰-etc-default-grub-æ–‡ä»¶"><a href="#1ï¼‰-etc-default-grub-æ–‡ä»¶" class="headerlink" title="1ï¼‰&#x2F;etc&#x2F;default&#x2F;grub æ–‡ä»¶"></a>1ï¼‰&#x2F;etc&#x2F;default&#x2F;grub æ–‡ä»¶</h5><p>æ®è¯´ video&#x3D;vesafb:off,efifb:off å·²ç»æ— æ³•ä½¿ç”¨ï¼ˆå¤§æ¦‚åœ¨7.xç‰ˆæœ¬ï¼‰<br>éœ€è¦æ”¹æˆ video&#x3D;vesafb:off video&#x3D;efifb:off<br>å¦‚æœæ˜¯ pve-kernel 5.15 å¯èƒ½è¿˜éœ€è¦ video&#x3D;simplefb:off<br>è¯¦è§ï¼š<br><a href="https://forum.proxmox.com/threads/pve7-failed-to-mmap-xxxx-xx-xx-x-bar-3-performance-may-be-slow.108129/">https://forum.proxmox.com/threads/pve7-failed-to-mmap-xxxx-xx-xx-x-bar-3-performance-may-be-slow.108129/</a><br><a href="https://forum.proxmox.com/threads/gpu-passthrough-not-working-bar-3.60996/">https://forum.proxmox.com/threads/gpu-passthrough-not-working-bar-3.60996/</a></p>
<h5 id="2ï¼‰ç›´é€šåˆ†ç»„"><a href="#2ï¼‰ç›´é€šåˆ†ç»„" class="headerlink" title="2ï¼‰ç›´é€šåˆ†ç»„"></a>2ï¼‰ç›´é€šåˆ†ç»„</h5><p>å¦‚æœä½ çš„ç¡¬ä»¶åˆ†ç»„åƒæˆ‘è¿™æ ·å­ï¼Œå³ä½¿åœ¨ &#x2F;etc&#x2F;default&#x2F;grub æ–‡ä»¶ä¸­æ·»åŠ äº† pcie_acs_override&#x3D;downstream å‚æ•°ä¾ç„¶æ— æ³•æ‹†åˆ†<br>    00:1f.3  9  Audio device: Intel Corporation Comet Lake PCH cAVS<br>    00:1f.4  9  SMBus: Intel Corporation Comet Lake PCH SMBus Controller<br>    00:1f.5  9  Serial bus controller [0c80]: Intel Corporation Comet Lake PCH SPI Controller<br>    00:1f.6  9  Ethernet controller: Intel Corporation Ethernet Connection (11) I219-V<br>æœ‰ä»¥ä¸‹è§£å†³æ–¹æ¡ˆ</p>
<ul>
<li>è‡ªè¡Œç¼–è¯‘å†…æ ¸æ‹†åˆ†è®¾å¤‡</li>
<li>å¯¹è¿™å°è™šæ‹Ÿæœºç›´é€šè¯¥åˆ†ç»„ä¸‹çš„æ‰€æœ‰è®¾å¤‡ï¼ˆæˆ–è€…ç‚¹å‡»ç›´é€šæ‰€æœ‰åŠŸèƒ½ï¼Œå¦‚æœè¿™æ ·åšï¼Œè¯¥åˆ†ç»„ä¸‹æ‰€æœ‰è®¾å¤‡éƒ½å°†ä¸èƒ½è¢«å…¶ä»–è™šæ‹Ÿæœºä½¿ç”¨ï¼Œå°¤å…¶è¦ç¡®è®¤ä½ çš„ç®¡ç†ç½‘å£ä¸åœ¨è¿™ä¸ªåˆ†ç»„ä¸‹ï¼‰<br><img src="/images/2022/2_3.png"></li>
</ul>
<h5 id="3ï¼‰ç›´é€šè®¾å¤‡æ•°é‡"><a href="#3ï¼‰ç›´é€šè®¾å¤‡æ•°é‡" class="headerlink" title="3ï¼‰ç›´é€šè®¾å¤‡æ•°é‡"></a>3ï¼‰ç›´é€šè®¾å¤‡æ•°é‡</h5><p>PVE æ¨¡æ‹Ÿäº†ä¸»æ¿çš„çœŸå®å·¥ä½œçŠ¶æ€ï¼Œæ‰€ä»¥ PCIã€SATAã€USB éƒ½æ˜¯æœ‰ç›´é€šä¸Šé™çš„ï¼Œå¦‚æœä½¿ç”¨äº†è¶…è¿‡ä¸Šé™çš„ç›´é€šè®¾å¤‡ï¼ˆåŒ…æ‹¬å†™åœ¨ &#x2F;etc&#x2F;pve&#x2F;nodes&#x2F;pve&#x2F;qemu-server&#x2F;xxx.conf æ–‡ä»¶ä¸‹çš„ç›´é€šè®¾å¤‡ï¼‰ï¼Œå¼€æœºä¼šå°±ä¼šæŠ¥ 400 é”™è¯¯<br><img src="/images/2022/2_2.png" alt="400 é”™è¯¯"><br>    Parameter verification failed. (400)<br>    undefined: property is not defined in schema and the schema does not allow additional properties<br>æœ‰ä»¥ä¸‹è§£å†³æ–¹æ¡ˆ</p>
<ul>
<li>ç¼–è¾‘ &#x2F;etc&#x2F;pve&#x2F;nodes&#x2F;pve&#x2F;qemu-server&#x2F;xxx.conf æ–‡ä»¶ï¼Œä½¿ç”¨è¿™æ ·çš„å‚æ•°ï¼ˆå¯èƒ½éœ€è¦è¿™äº›è®¾å¤‡åœ¨ä¸€ä¸ªåˆ†ç»„ä¸‹ï¼‰<br><code>hostpci1: 00:1f.3;00:1f.4;00:1f.5;00:1f.6</code></li>
<li>ç›´é€šæ•´ä¸ªåˆ†ç»„ï¼ˆä¿®æ”¹æ–‡ä»¶æˆ–åœ¨ WEB é¡µé¢ä¸­é€‰ä¸­ æ‰€æœ‰åŠŸèƒ½ï¼‰<br><code>hostpci1: 00:1f</code></li>
<li>ç›´é€šæ•´ä¸ªæ§åˆ¶å™¨ï¼Œå¦‚ USB æ§åˆ¶å™¨<br><code>00:14.0 USB controller: Intel Corporation Comet Lake USB 3.1 xHCI Host Controller</code><br><img src="/images/2022/2_4.png" alt="æˆ‘çš„é…ç½®å‚è€ƒ"><br>å®˜æ–¹WIKIï¼š<a href="https://pve.proxmox.com/wiki/Pci_passthrough">https://pve.proxmox.com/wiki/Pci_passthrough</a></li>
</ul>
<h5 id="4ï¼‰æ— æ³•å¼€æœºã€é©±åŠ¨è£…ä¸Šäº†ä¹Ÿæ²¡æœ‰ç”»é¢"><a href="#4ï¼‰æ— æ³•å¼€æœºã€é©±åŠ¨è£…ä¸Šäº†ä¹Ÿæ²¡æœ‰ç”»é¢" class="headerlink" title="4ï¼‰æ— æ³•å¼€æœºã€é©±åŠ¨è£…ä¸Šäº†ä¹Ÿæ²¡æœ‰ç”»é¢"></a>4ï¼‰æ— æ³•å¼€æœºã€é©±åŠ¨è£…ä¸Šäº†ä¹Ÿæ²¡æœ‰ç”»é¢</h5><ul>
<li>å°è¯•ä½¿ç”¨ romfile é€‰é¡¹<br>è‡ªè¡Œæå–<br>å‚è€ƒï¼š<a href="https://foxi.buduanwang.vip/virtualization/pve/1602.html/">https://foxi.buduanwang.vip/virtualization/pve/1602.html/</a><br>è¯·ç¡®å®šåœ¨ä¼ ç»Ÿæ¨¡å¼ä¸‹å¯åŠ¨ï¼Œå¦åˆ™ä¼šå‡ºç° -bash: rom: Permission denied ç­‰æŠ¥é”™<br>ä» BIOS ä¸­æå–<br>å‚è€ƒï¼š<a href="https://www.gitloc.com/archives/131.html">https://www.gitloc.com/archives/131.html</a><br>æˆ‘è¿™è¾¹ 10400(UHD630) &amp; åæ“ z490m pro4 å¯ä»¥ç”¨çš„ romfile<br>é“¾æ¥: <a href="https://pan.baidu.com/s/1FkrOBo2p1jaKUdnrXIZ1bA?pwd=8995">https://pan.baidu.com/s/1FkrOBo2p1jaKUdnrXIZ1bA?pwd=8995</a> æå–ç : 8995<br><strong>å¤‡æ³¨ï¼Œä» BIOS ä¸­æå–çš„ romfileï¼Œä¿®å¤ ROM çš„è®¾å¤‡é€šé“ ID æœ‰æ—¶ä¼šé€ æˆæ–‡ä»¶å¤±æ•ˆï¼ŒåŸå› ä¸æ˜ï¼ˆä¹Ÿè®¸å¤§æ¦‚æ˜¯åŠ å¯†é—®é¢˜ï¼‰</strong></li>
<li>å°è¯•ä½¿ç”¨å…¶ä»–è§†é¢‘æ¥å£<br>æˆ‘ç°åœ¨ä½¿ç”¨çš„  åæ“ z490m pro4 ç›´é€šå HDMI æ— ä¿¡å·è¾“å‡ºï¼Œåªæœ‰ VGA å’Œ DP æ¥å£ä½¿ç”¨æ­£å¸¸ï¼Œå¤§æ¦‚ç±»ä¼¼äºé»‘è‹¹æœæ— æ³•ä½¿ç”¨ HDMI å£ï¼ˆå…¶å® romfile åº”è¯¥è¿˜æ˜¯æœ‰ç”¨ï¼Œæˆ‘æ‡’å¾—æŠ˜è…¾äº†ï¼Œåæ­£èƒ½ç”¨äº†ï¼‰<br>å‚è€ƒï¼š<a href="https://apple.sqlsec.com/6-%E5%AE%9E%E7%94%A8%E5%A7%BF%E5%8A%BF/6-13.html">https://apple.sqlsec.com/6-å®ç”¨å§¿åŠ¿/6-13.html</a></li>
</ul>
<h2 id="ä¸€äº›åˆ«çš„å‘"><a href="#ä¸€äº›åˆ«çš„å‘" class="headerlink" title="ä¸€äº›åˆ«çš„å‘"></a>ä¸€äº›åˆ«çš„å‘</h2><ul>
<li><p>å› ä¸ºå¼€å§‹çš„æ—¶å€™æ²¡æœ‰ DP è½¬æ¥å¤´ï¼Œæˆ‘ä¹Ÿä¸ç¡®å®š DP æ¥å£æœ‰æ²¡æœ‰ä¿¡å·è¾“å‡ºï¼Œæƒ³ç€å¹²è„†åš GVT-G è®©ç¾¤æ™–å’Œ Windows éƒ½èƒ½ç”¨ä¸Šæ ¸æ˜¾ç®—äº†ï¼Œäºæ˜¯ä¹°äº† USB è½¬ HDMI ï¼Œç„¶åæ‰‹è´±è§‰å¾— type-c æ¯”è¾ƒå°å·§è¿˜æœ‰å¼¯å¤´å¯é€‰<br>ä¹°å›æ¥ä¹‹åæ‰çŸ¥é“å°å¼æœº type-c ä¸æ˜¯å…¨åŠŸèƒ½ C å£ï¼Œæ ¹æœ¬æ— æ³•ä¼ è¾“è§†é¢‘ä¿¡å·ï¼Œå¹¶ä¸” type-c è§†é¢‘è¾“å‡ºå…¶å®ä¹Ÿæ˜¯èµ°çš„ DP è¾“å‡ºï¼Œå¯¹äºæˆ‘å½“æ—¶çš„æƒ…å†µæ— æµäºäº‹<br>æ‰€ä»¥å¦‚æœè¦åš GVT-G å’Œè§†é¢‘è¾“å‡ºï¼Œè®¤å‡†è¿™å‡ ä¸ªå­— â€œ<strong>USBå¤–ç½®æ˜¾å¡</strong>â€œï¼ï¼ˆå› ä¸ºä¸ç¡®å®šè¿™ç©æ„è§£ç åˆ°åº•èµ°çš„ GPU è¿˜æ˜¯ CPU æˆ–è€…æ˜¯å¤–ç½®æ˜¾å¡æœ¬èº«ï¼Œæˆ‘æœ€åè¿˜æ˜¯æ”¾å¼ƒäº†ï¼Œè¿˜å¥½ DP ä¿¡å·æ­£å¸¸ï¼‰<br><del>å…¶å®è¿˜æ˜¯ç¿»è½¦äº†ï¼Œ69 çš„æŸç»¿è½¬æ¥å¤´æ—¶ä¸æ—¶é»‘å±é—ªå±ï¼Œ1080P å‹‰å¼ºèƒ½ç”¨ï¼Œ4K å‹æ ¹å°±æ˜¯æ®‹åºŸï¼ŒDP æ¥å£å¯¹çº¿æè¦æ±‚å®åœ¨å¤ªé«˜äº†</del></p>
</li>
<li><p>åæ“ä¸»æ¿ æ”¹æ˜¾å­˜ï¼Œå¢åŠ  GVT-G â€œæ˜¾å¡â€ éœ€è¦ä½¿ç”¨è¿™ä¸ªå¼•å¯¼<br><a href="https://github.com/XDleader555/grub_setup_var">https://github.com/XDleader555/grub_setup_var</a><br>æŒ‡ä»¤å‚è€ƒï¼ˆæˆ‘è¿™ä¸ªä¸»æ¿å®æµ‹åªèƒ½æ”¹åˆ° 512mï¼Œ1Gæ— æ³•å¼€æœºï¼Œè€è€å®å®æ‰£ç”µæ± ï¼‰</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">setup_var SaSetup 0xAF 0x3</span><br></pre></td></tr></table></figure>
<ul>
<li><p>PVE 7.1&#x2F;7.2 æŸäº›å†…æ ¸ç›´é€šå¯èƒ½å­˜åœ¨é—®é¢˜ï¼Œéœ€è¦å°è¯•æ›´æ¢å†…æ ¸<br>7.2 ç‰ˆæœ¬é»˜è®¤å†…æ ¸è²Œä¼¼æ— æ³•ä½¿ç”¨ UPT æ¨¡å¼ç›´é€šæ ¸æ˜¾ï¼ˆLegacy æ¨¡å¼æ— å½±å“ï¼‰<br><strong>æ®è¯´</strong>æ­£å¸¸å¯ç”¨çš„ç‰ˆæœ¬æœ‰ 5.13.19-4-pve<br>å‚è€ƒï¼š<a href="https://www.jianshu.com/p/822c167d0c3a">https://www.jianshu.com/p/822c167d0c3a</a></p>
</li>
<li><p>è™šæ‹Ÿæœº Windows å…³æœºå HDMI æ— å£°éŸ³<br>åŸå› ä¸æ˜ï¼Œä¸´æ—¶è§£å†³æ–¹æ¡ˆ</p>
</li>
</ul>
<ol>
<li>ä¸è¦ä½¿ç”¨å…³æœºé€‰é¡¹ï¼Œç”¨ä¼‘çœ æ›¿ä»£ï¼ˆé‡å¯æˆ–å…³æœºåæ— å£°éŸ³ï¼Œä¹Ÿå¯ä»¥ç”¨ä¼‘çœ åé‡æ–°å¼€æœºæ¢å¤ï¼Œå¥‡è‘©çš„ bugï¼‰<br><em>æ³¨ï¼šå¦‚æœ Windows å¼€å¯ä¼‘çœ ï¼Œæ— æ³•æ­£å¸¸å”¤é†’ï¼ˆå”¤é†’å˜é‡å¯ç­‰ï¼‰ï¼Œè¯·å°è¯•æ›´æ¢é©±åŠ¨ã€romfile æ–‡ä»¶</em></li>
<li>ä½¿ç”¨ USB å£°å¡æˆ–æ¿è½½å£°å¡æ¥å£è¾“å‡ºéŸ³é¢‘ï¼ˆè¿™æ˜¯æ— å¥ˆä¹‹é€‰ï¼Œå¦‚æœè¦æ¥åˆ°ç”µè§†è¿™ç§è®¾å¤‡ï¼Œæ²¡æœ‰ 3.5mm éŸ³é¢‘å£åˆå„ç§å°è¯•å¤±è´¥çš„è¯ï¼ŒVGA+3.5mm è½¬ HDMIï¼Œæ•ˆæœå˜›â€¦â€¦â€¦â€¦:fa-meh-o::fa-meh-o::fa-meh-o::fa-meh-o:ï¼‰<br><img src="/images/2022/2_5.png"></li>
</ol>
<h2 id="å…¶ä»–å¯èƒ½ç”¨åˆ°çš„ä¸œè¥¿"><a href="#å…¶ä»–å¯èƒ½ç”¨åˆ°çš„ä¸œè¥¿" class="headerlink" title="å…¶ä»–å¯èƒ½ç”¨åˆ°çš„ä¸œè¥¿"></a>å…¶ä»–å¯èƒ½ç”¨åˆ°çš„ä¸œè¥¿</h2><ul>
<li>ç¾¤æ™–æ ¸æ˜¾é©±åŠ¨çŠ¶æ€å’Œç¡¬è§£çŠ¶æ€æŸ¥è¯¢</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo -i</span><br><span class="line">ls /dev/dri</span><br><span class="line">cat /sys/kernel/debug/dri/0/i915_frequency_info</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¾¤æ™–æ›¿æ¢é©±åŠ¨æ–‡ä»¶ï¼ˆå°† i915.ko æ–‡ä»¶æ”¾å…¥ &#x2F;tmp&#x2F; æ–‡ä»¶å¤¹ä¸‹ï¼‰</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo -i</span><br><span class="line">rm /usr/lib/modules/i915.ko &amp;&amp; cp /tmp/i915.ko /usr/lib/modules/</span><br></pre></td></tr></table></figure>

<ul>
<li><p>è®© VM æ”¯æŒç½‘ç»œå”¤é†’ï¼Œé…åˆ home assistant åš htpc å¼€å…³æœºæ§åˆ¶<br>å‚è€ƒï¼š<a href="https://bbs.hassbian.com/thread-16061-1-1.html">https://bbs.hassbian.com/thread-16061-1-1.html</a></p>
</li>
<li><p>åœ¨è™šæ‹Ÿæœºä¸‹æ§åˆ¶ä¸»æ¿RGB<br>å®‰è£… OpenRGBï¼š<a href="https://openrgb.org/releases.html">https://openrgb.org/releases.html</a><br>ç›´é€š USB ä¸­çš„ RGB æ§åˆ¶å™¨ï¼Œä¸‹è½½å®‰è£…å¼€å¯ OpenRGBï¼ˆç¬¬ä¸€æ¬¡æ‰“å¼€éœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰</p>
</li>
<li><p>PVE å†…æ ¸ 5.15 ä¼šå‡ºç°æ˜¾å¡ç›´é€š (HDMI ç›´é€š) ä¸‹ Windows è™šæ‹Ÿæœºçš„ é¼ æ ‡æŒ‡é’ˆä¸æ˜¾ç¤º æˆ– é¼ æ ‡ååº”å¡é¡¿ çš„é—®é¢˜ã€‚è§£å†³æ–¹æ³•å¦‚ä¸‹:</p>
</li>
</ul>
<ol>
<li>ä½¿ç”¨ noVNC æˆ– RDP ç™»å½•è¿› Windowsï¼Œåœ¨â€œæ§åˆ¶é¢æ¿ - é¼ æ ‡ - æŒ‡é’ˆé€‰é¡¹â€ä¸­å¯ç”¨â€œæ˜¾ç¤ºé¼ æ ‡è½¨è¿¹â€ï¼Œå¹¶æŠŠæ»‘å—æ‹–è‡³æœ€å·¦ (åŸºæœ¬ä¸å½±å“æ˜¾ç¤ºä½“éªŒ)ï¼›</li>
<li>å‡çº§åˆ° 6.x å†…æ ¸æˆ–é™çº§åˆ° 5.13 å†…æ ¸<br>æ£€æŸ¥æ˜¯å¦å®‰è£… 5.13 ç‰ˆå†…æ ¸:<br>proxmox-boot-tool kernel list</li>
</ol>
<p>å¦‚æœ 5.13 å†…æ ¸æœªè¢«å®‰è£…æˆ–è€…å†…æ ¸è¢«æ‰‹åŠ¨æ¸…ç†çš„è¯å¯èƒ½éœ€è¦æ‰‹åŠ¨å®‰è£… 5.13 å†…æ ¸:<br>apt install pve-kernel-5.13</p>
<p>å®‰è£…æˆåŠŸåå†æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å·²å®‰è£…çš„å†…æ ¸:<br>proxmox-boot-tool kernel list</p>
<p>å›ºå®šä¹‹åå¯åŠ¨çš„å†…æ ¸ç‰ˆæœ¬:<br>proxmox-boot-tool kernel pin 5.13.19-6-pve</p>
<p>ä¿å­˜é…ç½®:<br>proxmox-boot-tool refresh</p>
<p>é‡å¯åå†…æ ¸å³è¢«å›é€€è‡³ 5.13ã€‚</p>
<p>å¦‚æœä½ æƒ³è§£é™¤å†…æ ¸å›ºå®šï¼Œå¯ä»¥æ‰§è¡Œ:<br>proxmox-boot-tool kernel unpin 5.13.19-6-pve<br>proxmox-boot-tool refresh</p>
<h2 id="ç»å†è¿‡çš„æ­»æœºçŠ¶å†µè®°å½•"><a href="#ç»å†è¿‡çš„æ­»æœºçŠ¶å†µè®°å½•" class="headerlink" title="ç»å†è¿‡çš„æ­»æœºçŠ¶å†µè®°å½•"></a>ç»å†è¿‡çš„æ­»æœºçŠ¶å†µè®°å½•</h2><ol>
<li>J4125 çš„æ—¶å€™ï¼ŒUSB å£ä¸å¤Ÿç”¨ï¼Œæ¥äº†ä¸¤ä¸ª USB é›†çº¿å™¨ï¼Œé›†çº¿å™¨ä¸Šæ’è¶…è¿‡ 3 ä¸ª USB è®¾å¤‡ç›´é€šç»™ Windowsï¼Œä¸€å°æ—¶ä¹‹å†…ç»å¯¹ä¼š boomï¼Œè‡³ä»Šä¸çŸ¥é“æ˜¯é‚£å—ä¸»æ¿çš„é—®é¢˜è¿˜æ˜¯ PVE çš„é—®é¢˜ï¼ˆåæ¥ä¸€ç›´æ’ç€ 3 ä¸ª USBï¼Œå†ä¹Ÿæ²¡é‡åˆ°è¿‡æ­»æœºç°è±¡ï¼Œå‡çº§ PVE åä¹Ÿæ²¡æµ‹è¯•ï¼Œæ²¡æ·±ç©¶åŸå› ï¼‰</li>
<li>åˆšè£…å®Œæ–°æœºå­ï¼Œæ‹¿å›å®¶ç”¨ä¹‹åè«åå…¶å¦™çš„ä¸ç¨³å®šï¼Œè„¸é»‘å°±æ­»æœºï¼Œé‡è£…å¹¶å‡çº§åˆ° 7.2 ä¹‹åå¥½äº†ï¼Œè¯¯ä¼šæ˜¯å†…æ ¸çš„åŸå› ï¼Œç›´åˆ°å‰å‡ å¤©æƒ³æ”¹é£æ‰‡è½¬é€Ÿï¼Œé¡ºä¾¿å¼€èŠ‚èƒ½ï¼Œæ­»æœºæƒ…å†µåˆå‘ç”Ÿäº†ï¼Œæ‰ç¡®å®šæ˜¯ä¸»æ¿å¼€å¯ C6&#x2F;C7 èŠ‚èƒ½çš„åŸå› ã€‚</li>
</ol>
<h3 id="End"><a href="#End" class="headerlink" title="End"></a>End</h3>]]></content>
      <categories>
        <category>Proxmox VE</category>
      </categories>
      <tags>
        <tag>Proxmox VE</tag>
        <tag>PVE</tag>
        <tag>PVEè®¾ç½®</tag>
        <tag>PVEæ ¸æ˜¾ç›´é€š</tag>
        <tag>æ ¸æ˜¾ç›´é€š</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2022/05/25/hello-world/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
</search>
